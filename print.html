<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>G's-Sapporo-Dev03</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="note/index.html"><strong aria-hidden="true">1.</strong> 講義資料ノート</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="note/about.html"><strong aria-hidden="true">1.1.</strong> 受講時の注意</a></li><li class="chapter-item expanded "><a href="note/with-code.html"><strong aria-hidden="true">1.2.</strong> コードに向き合いやすくなる考え方</a></li><li class="chapter-item expanded "><a href="note/for-work.html"><strong aria-hidden="true">1.3.</strong> 課題にチャレンジするコツ</a></li></ol></li><li class="chapter-item expanded "><a href="js/index.html"><strong aria-hidden="true">2.</strong> JavaScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="js/js01/index.html"><strong aria-hidden="true">2.1.</strong> JS_おみくじ</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="js/index.html"><strong aria-hidden="true">2.1.1.</strong> JavaScriptとは</a></li><li class="chapter-item expanded "><a href="components/variable.html"><strong aria-hidden="true">2.1.2.</strong> 変数と計算</a></li><li class="chapter-item expanded "><a href="components/random.html"><strong aria-hidden="true">2.1.3.</strong> ランダムな数（乱数）をつくる</a></li><li class="chapter-item expanded "><a href="components/if.html"><strong aria-hidden="true">2.1.4.</strong> 条件分岐</a></li><li class="chapter-item expanded "><a href="js/js01/omikuji.html"><strong aria-hidden="true">2.1.5.</strong> おみくじのWebアプリ実装</a></li><li class="chapter-item expanded "><a href="js/js01/work.html"><strong aria-hidden="true">2.1.6.</strong> 課題</a></li></ol></li><li class="chapter-item expanded "><a href="js/js02/index.html"><strong aria-hidden="true">2.2.</strong> JS_メモパッド</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="components/array.html"><strong aria-hidden="true">2.2.1.</strong> 配列</a></li><li class="chapter-item expanded "><a href="components/for.html"><strong aria-hidden="true">2.2.2.</strong> 繰り返し処理</a></li><li class="chapter-item expanded "><a href="components/object.html"><strong aria-hidden="true">2.2.3.</strong> オブジェクト</a></li><li class="chapter-item expanded "><a href="js/js02/memopad01.html"><strong aria-hidden="true">2.2.4.</strong> LocalStorage（メモ帳初級）</a></li><li class="chapter-item expanded "><a href="js/js02/memopad02.html"><strong aria-hidden="true">2.2.5.</strong> JSONデータ（メモ帳中級）</a></li><li class="chapter-item expanded "><a href="js/js02/work.html"><strong aria-hidden="true">2.2.6.</strong> 課題</a></li></ol></li><li class="chapter-item expanded "><a href="js/js04/index.html"><strong aria-hidden="true">2.3.</strong> JS_Firebase</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="components/function.html"><strong aria-hidden="true">2.3.1.</strong> 関数</a></li><li class="chapter-item expanded "><a href="js/js04/chat-app.html"><strong aria-hidden="true">2.3.2.</strong> リアルタイムチャットの実装</a></li><li class="chapter-item expanded "><a href="js/js04/firebase-project.html"><strong aria-hidden="true">2.3.3.</strong> Firebaseの準備1（プロジェクトの作成）</a></li><li class="chapter-item expanded "><a href="js/js04/firebase-js.html"><strong aria-hidden="true">2.3.4.</strong> Firebaseの準備2（ソースコードの準備）</a></li><li class="chapter-item expanded "><a href="js/js04/firebase-db.html"><strong aria-hidden="true">2.3.5.</strong> Firebaseの準備3（データベースの準備）</a></li><li class="chapter-item expanded "><a href="js/js04/chat-create.html"><strong aria-hidden="true">2.3.6.</strong> チャット画面の実装とデータの送信</a></li><li class="chapter-item expanded "><a href="js/js04/chat-read.html"><strong aria-hidden="true">2.3.7.</strong> データのリアルタイム取得と画面表示</a></li><li class="chapter-item expanded "><a href="js/js04/optimize.html"><strong aria-hidden="true">2.3.8.</strong> 機能追加</a></li><li class="chapter-item expanded "><a href="js/js04/work.html"><strong aria-hidden="true">2.3.9.</strong> 課題と提出時の注意点</a></li></ol></li><li class="chapter-item expanded "><a href="js/js05/index.html"><strong aria-hidden="true">2.4.</strong> JS_API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="js/js05/about-api.html"><strong aria-hidden="true">2.4.1.</strong> APIとは</a></li><li class="chapter-item expanded "><a href="js/js05/booksapi.html"><strong aria-hidden="true">2.4.2.</strong> GoogleBooksAPI</a></li><li class="chapter-item expanded "><a href="js/js05/geolocation.html"><strong aria-hidden="true">2.4.3.</strong> 位置情報の活用</a></li><li class="chapter-item expanded "><a href="js/js05/bingmapsapi-setup.html"><strong aria-hidden="true">2.4.4.</strong> BingMapsAPI/準備</a></li><li class="chapter-item expanded "><a href="js/js05/bingmapsapi-map.html"><strong aria-hidden="true">2.4.5.</strong> BingMapsAPI/実践</a></li><li class="chapter-item expanded "><a href="js/js05/bingmapsapi-pin.html"><strong aria-hidden="true">2.4.6.</strong> 【おまけ】BingMapsAPI/機能追加</a></li><li class="chapter-item expanded "><a href="js/js05/other-api.html"><strong aria-hidden="true">2.4.7.</strong> その他のAPI紹介</a></li><li class="chapter-item expanded "><a href="js/js05/work.html"><strong aria-hidden="true">2.4.8.</strong> 課題</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="php/index.html"><strong aria-hidden="true">3.</strong> PHP</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="php/php_setup/index.html"><strong aria-hidden="true">3.1.</strong> PHP事前準備</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">G's-Sapporo-Dev03</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="講義資料ノート"><a class="header" href="#講義資料ノート">講義資料ノート</a></h1>
<p>サンプルコードはこちら</p>
<p><a href="https://bit.ly/3rkcXH8">https://bit.ly/3rkcXH8</a></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="受講時の注意"><a class="header" href="#受講時の注意">受講時の注意</a></h1>
<p>時間もお金も投資しているのだからむしり取れるだけむしり取れッ！</p>
<h2 id="講義中に意識するポイント"><a class="header" href="#講義中に意識するポイント">講義中に意識するポイント</a></h2>
<p>ただ受けているだけだと資料の内容しかものにできずもったいない！</p>
<p>まず下記は絶対厳守！！！</p>
<ul>
<li>うまくいかないときに黙っている「サイレント詰み」は犯罪！</li>
<li>まずはわからなくても「動くもの」をつくれ！</li>
<li>食糧飲料燃料の補給は各自のペースで！（自分にとって最適な状況を用意しろッ！）</li>
</ul>
<h2 id="いつでもコードを書けるように"><a class="header" href="#いつでもコードを書けるように">いつでもコードを書けるように！</a></h2>
<ul>
<li>授業中は常にエディタを起動！</li>
<li>資料も常に開いておこう！</li>
</ul>
<h2 id="講義中はまず動くものをつくれ"><a class="header" href="#講義中はまず動くものをつくれ">講義中はまず動くものをつくれ！</a></h2>
<ul>
<li>講義では一緒に1つのアプリケーションをつくる．</li>
<li>わからなくてもとにかく「動かす」．</li>
<li>課題に挑戦すると大抵うまくいかない．そのときに「講義でつくった動くもの」と「自分でつくった動かないもの」を比較して何がマズイのか探るんだッ！</li>
</ul>
<h2 id="聴くときは聴き書くときは書く"><a class="header" href="#聴くときは聴き書くときは書く">聴くときは聴き，書くときは書く！</a></h2>
<ul>
<li>初めて挑戦することなので，わからなくなって当然．．！</li>
<li>まずはしっかり説明を聴こう！</li>
<li>聴くときは聴くこと，手を動かすときは手を動かすことに集中！！</li>
</ul>
<h2 id="クラスのメンバーでお互いに刺激し合おう"><a class="header" href="#クラスのメンバーでお互いに刺激し合おう">クラスのメンバーでお互いに刺激し合おう！</a></h2>
<ul>
<li>考えたことや感じたことはslackの「ガヤチャンネル」でガンガン発信！</li>
<li>くだらないことでもOK！！意見を言うやつは偉い！！</li>
<li>誰かのコメントに乗っかろう！</li>
</ul>
<h2 id="疑問を共有しよう"><a class="header" href="#疑問を共有しよう">疑問を共有しよう！</a></h2>
<ul>
<li>質問はまずslackへ！</li>
<li>慣れないうちは「詰んだ」の一言から．詰みを表明することが大切！</li>
<li>慣れたら「エラーのスクショ」や「書いたコード」を貼ろう！</li>
<li>他の人の質問にも目を通そう！（同じ質問があるかも）</li>
</ul>
<h2 id="進捗を共有しよう"><a class="header" href="#進捗を共有しよう">進捗を共有しよう！</a></h2>
<ul>
<li>演習時，できた人はスクショなどslackに貼ってアウトプット！</li>
<li>できたら「できた」コメント！</li>
<li>詰んだら「詰んだ」コメント！</li>
<li>みなさんのコメントを見ながら講義を進めていきます！</li>
</ul>
<h2 id="詰みを脱するtips"><a class="header" href="#詰みを脱するtips">詰みを脱するTips</a></h2>
<ul>
<li>まずは打ち間違いを疑おう！
<ul>
<li><code>()</code> <code>[]</code> <code>{}</code> <code>'</code> <code>&quot;</code> <code>;</code> など</li>
</ul>
</li>
<li>書いたら保存しよう！（よく忘れる！）
<ul>
<li>Mac: <code>command + s</code></li>
<li>Windows: <code>ctrl + s</code></li>
</ul>
</li>
<li>他の人に見てもらおう！
<ul>
<li>自分の打ち間違いは10分探しても見つからないが，他人の打ち間違いは2秒で見つかる．</li>
<li>「隣の人」「slack + スクショ」「zoomのブレイクアウト」を活用するのだッ！</li>
</ul>
</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="コードに向き合いやすくなる考え方"><a class="header" href="#コードに向き合いやすくなる考え方">コードに向き合いやすくなる考え方</a></h1>
<p>彼を知り己を知らば百戦危うからず．</p>
<h2 id="質問を制すものはコードを制す"><a class="header" href="#質問を制すものはコードを制す">質問を制すものはコードを制す！</a></h2>
<p>わからなかったり動かなかったりのときは遠慮なく質問せよ！</p>
<p>下記を記述するとお互いに幸せになれる確率が高まるッ！</p>
<ul>
<li>やりたいことは何か</li>
<li>どういう状態（動き）になればゴールなのか</li>
<li>どうやったか（考え方や書いたコードなど）</li>
<li>どうなったか（エラーメッセージやスクショなど）</li>
<li>調べたときのググりワード，参考にしたサイトのURL</li>
</ul>
<p>勿論最初から全部はできないので，まずは遠慮なく投稿するのが大事！</p>
<p>（足りない部分は講師チューターの方々が拾ってくれる）</p>
<h2 id="言語化が大事"><a class="header" href="#言語化が大事">言語化が大事！</a></h2>
<ul>
<li>「言語化」とは自分のやりたいことやうまくいかない現状を他の人に説明すること．</li>
<li>言語化は「できると良い」ではなく「できなければコードが書けない」のである．講師チューターは超能力者ではないので，みなさんが説明しなければ何をしたいのかわからないのだッ．．！</li>
<li>コードを書くにも「JavaScriptで何を書けばよいのか」「どうなればOKなのか」を自ら決めて明確にすることが第一歩．</li>
<li>無理矢理にでも言葉にしたら誰かにぶつけよう．誰かと議論することでより解像度が高まる．最初は「ちょっと何いってるかわからない」と言われるが，やらないと言語化のスキルは高まらない．沈黙は死．</li>
</ul>
<h2 id="正解を求める思考を捨てよ"><a class="header" href="#正解を求める思考を捨てよ">正解を求める思考を捨てよ！</a></h2>
<ul>
<li>「唯一の正解は存在しない」</li>
<li>提示されたヒントでは動かないこともあるし，それとは異なる方法でうまくいくこともある．</li>
<li>一つのやり方に固執することは地獄への一本道を進むことに似たり．</li>
<li>「効率のよいやり方」など一旦動かしてから改めて考えれば良い．力技だろうがまずは動けば良かろうなのだァァッ！！</li>
</ul>
<h2 id="コードは量という勝ちパターン"><a class="header" href="#コードは量という勝ちパターン">「コードは量」という勝ちパターン！</a></h2>
<ul>
<li>一発でうまくいくことはほぼない．特にはじめの頃は経験値が少なく「運ゲー」度が高いので，何度もやり直してうまく行くパターンを引かなければならない．</li>
<li>運ゲーをものにするには試行回数が必要で，そのためには時間が必要になる．敵の行動パターンを集めながら会心の一撃が出るまで粘れ！</li>
<li>わからなければ講義内容を10周くらいすれば何か見えてくるはず．わからないと嘆く時間があるならコードを書こう．レベルが足りないなら雑魚敵を狩って経験値を稼ごう．</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="課題にチャレンジするコツ"><a class="header" href="#課題にチャレンジするコツ">課題にチャレンジするコツ</a></h1>
<p>課題を制すものは全てを制す．</p>
<h2 id="自分でネタを決めよ"><a class="header" href="#自分でネタを決めよ">自分でネタを決めよ！</a></h2>
<ul>
<li>誰かに言われたものをつくっても面白くない．．．</li>
<li>自分で「何をつくりあげるのか」を決断してチャレンジすることが大切！</li>
<li>「自分で決めたことをやり遂げる」のが最高にCoolッ！</li>
</ul>
<h2 id="つくりたいものをつくれ"><a class="header" href="#つくりたいものをつくれ">つくりたいものをつくれ！</a></h2>
<ul>
<li>「役に立つ」「ウケそう」ではない．．．</li>
<li>「自分がほしい物」「おもしろいと思うもの」にチャレンジすることで身が入る！</li>
<li>「誰かに褒められる感覚」よりも「全力でやりきった感覚」ッ！</li>
</ul>
<h2 id="まず見た目より動きをつくれ"><a class="header" href="#まず見た目より動きをつくれ">まず見た目より動きをつくれ！</a></h2>
<ul>
<li>プロダクトには「機能」「見た目」どちらも大事！</li>
<li>見た目を作り込むことでより「完成度の高いプロダクト」になる．</li>
<li>しかしまずは「機能」や「動き」をつくる．「見た目」はその後ッ！</li>
<li>見た目を先につくると，機能を変更したときに作り直しになる．．．</li>
</ul>
<h2 id="技術自体を楽しめ"><a class="header" href="#技術自体を楽しめ">技術自体を楽しめ！</a></h2>
<ul>
<li>技術は「アイデアを実現するためのツール」．</li>
<li>しかし技術をより深く知ることで「できることのイメージが広がる」！</li>
<li>「好きな技術」「やってて楽しい技術」を見つけよう！まずは技術にのめり込もう！</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="javascript"><a class="header" href="#javascript">JavaScript</a></h1>
<h2 id="javascriptの役割"><a class="header" href="#javascriptの役割">JavaScriptの役割</a></h2>
<table><thead><tr><th>言語</th><th>役割</th></tr></thead><tbody>
<tr><td>HTML（マスター済み）</td><td>コンテンツの指定<br>タイトル，文章，画像などの記述</td></tr>
<tr><td>CSS（マスター済み）</td><td>コンテンツの装飾<br>色，大きさ，配置などの指定</td></tr>
<tr><td>JavaScript</td><td>ユーザー操作，イベント発生による動きを実現<br>（わりとなんでもできる）</td></tr>
</tbody></table>
<h2 id="javascriptとは"><a class="header" href="#javascriptとは">JavaScriptとは</a></h2>
<p><strong>JavaScript ≠ JAVA</strong></p>
<p>JavaScriptとJAVAの違い</p>
<table><thead><tr><th>JavaScript</th><th>JAVA</th></tr></thead><tbody>
<tr><td>フロントエンド言語</td><td>サーバサイド言語</td></tr>
<tr><td>カモミール</td><td>カモ</td></tr>
<tr><td>オーストラリア</td><td>オーストリア</td></tr>
<tr><td>ハムスター</td><td>ハム</td></tr>
<tr><td>メロンパン</td><td>メロン</td></tr>
</tbody></table>
<h2 id="webアプリケーションに欠かせないjavascript"><a class="header" href="#webアプリケーションに欠かせないjavascript">Webアプリケーションに欠かせないJavaScript</a></h2>
<p><img src="js/./img/js_introduction_web_app.svg" alt="Webアプリケーションのしくみ" /></p>
<h3 id="言語別人気ランキング2020年"><a class="header" href="#言語別人気ランキング2020年">言語別人気ランキング（2020年）</a></h3>
<table><thead><tr><th>言語</th><th>使用している開発者（%）</th></tr></thead><tbody>
<tr><td>JavaScript</td><td><code>||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||</code>69.7%</td></tr>
<tr><td>HTML/CSS</td><td><code>||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||</code>62.4%</td></tr>
<tr><td>SQL</td><td><code>|||||||||||||||||||||||||||||||||||||||||||||||||||||||||</code>56.9%</td></tr>
<tr><td>Python</td><td><code>||||||||||||||||||||||||||||||||||||||||||</code>41.6%</td></tr>
<tr><td>JAVA</td><td><code>||||||||||||||||||||||||||||||||||||||</code>38.4%</td></tr>
<tr><td>C#</td><td><code>||||||||||||||||||||||||||||||||</code>32.3%</td></tr>
<tr><td>TypeScript</td><td><code>||||||||||||||||||||||||||||</code>28.3%</td></tr>
<tr><td>PHP</td><td><code>||||||||||||||||||||||||||</code>25.8%</td></tr>
</tbody></table>
<p><a href="https://insights.stackoverflow.com/survey/2020/#technology-programming-scripting-and-markup-languages">ソース: https://insights.stackoverflow.com/survey/2020/#technology-programming-scripting-and-markup-languages</a></p>
<h2 id="javascript周辺の技術"><a class="header" href="#javascript周辺の技術">JavaScript周辺の技術</a></h2>
<p><img src="js/./img/js_introduction_around_js.svg" alt="JS周辺技術" /></p>
<h3 id="よく使われる技術"><a class="header" href="#よく使われる技術">よく使われる技術</a></h3>
<table><thead><tr><th>技術</th><th>特徴</th></tr></thead><tbody>
<tr><td><img src="js/./img/1280px-JQuery-Logo.svg.png" width="200px"></td><td>- JavaScriptのライブラリ．<br>- ユーザ操作イベントやアニメーションを実現<br>- ✅ 生JSと比較して短くかける．<br>- ✅ webアプリケーションで広く普及している．<br>- ✅ 導入が簡単．<br>- ✅ 学習コストが低い．<br>- 🔼 難しいことをやろうとすると複雑になる．<br>- まずはここから！</td></tr>
<tr><td><img src="js/./img/react-logo.png" width="200px"><br><img src="js/./img/Vue-logo-001.svg" width="200px"><br></td><td>- JavaScriptのライブラリ．<br>- ✅ モダンなwebアプリケーション（SPA）を実現<br>- ✅ 高速！<br>- ✅ TypeScriptでの実装も可能<br>- ✅ スマホアプリも見据えた開発が可能．<br>- 🔼 学習コスト<br>- 🔼 環境構築がややハードル．<br>- （私はReactが好き）</td></tr>
<tr><td><img src="js/./img/nodejs-logo-vector.svg" width="200px"></td><td>- サーバサイドでJavaScriptを動かす技術．<br>- ✅ フロントもサーバもJavaScriptで書ける．．！<br>- ✅ サーバサイドの中では環境構築が容易<br>- 🔼 難しいことをやろうとすると複雑になる．</td></tr>
</tbody></table>
<h2 id="javascriptを書く"><a class="header" href="#javascriptを書く">JavaScriptを書く</a></h2>
<h3 id="書き方"><a class="header" href="#書き方">書き方</a></h3>
<p><code>&lt;script&gt;&lt;/script&gt;</code>の間に処理を記述！</p>
<h3 id="書く場所"><a class="header" href="#書く場所">書く場所</a></h3>
<ul>
<li>htmlファイルの<code>&lt;/body&gt;</code>のすぐ上に書こう！</li>
<li>ほかにもいくつか書ける場所があります．</li>
<li>別にファイルを作るやり方もあります．</li>
</ul>
<h3 id="まず動かす"><a class="header" href="#まず動かす">まず動かす！！</a></h3>
<ul>
<li><code>alert()</code></li>
<li><code>console.log()</code></li>
</ul>
<blockquote>
<p>文字列は「<code>'</code>」か「<code>&quot;</code>」で囲む．どちらでもOK！</p>
</blockquote>
<pre><code class="language-html">&lt;script&gt;
  alert('Hello world');

  console.log('Hello world');

&lt;/script&gt;

</code></pre>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="js_おみくじ"><a class="header" href="#js_おみくじ">JS_おみくじ</a></h1>
<h2 id="本講義の内容とゴール"><a class="header" href="#本講義の内容とゴール">本講義の内容とゴール</a></h2>
<h3 id="本講義の内容"><a class="header" href="#本講義の内容">本講義の内容</a></h3>
<ul>
<li>JavaScriptを動かす！</li>
<li>変数と条件分岐の練習と実装．</li>
<li>おみくじアプリケーションの実装．</li>
</ul>
<h3 id="本講義のゴール"><a class="header" href="#本講義のゴール">本講義のゴール</a></h3>
<ul>
<li>プログラミングに慣れる！</li>
<li>「変数」「条件分岐」を扱う！</li>
<li>課題に取り組み始める！</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="javascript-1"><a class="header" href="#javascript-1">JavaScript</a></h1>
<h2 id="javascriptの役割-1"><a class="header" href="#javascriptの役割-1">JavaScriptの役割</a></h2>
<table><thead><tr><th>言語</th><th>役割</th></tr></thead><tbody>
<tr><td>HTML（マスター済み）</td><td>コンテンツの指定<br>タイトル，文章，画像などの記述</td></tr>
<tr><td>CSS（マスター済み）</td><td>コンテンツの装飾<br>色，大きさ，配置などの指定</td></tr>
<tr><td>JavaScript</td><td>ユーザー操作，イベント発生による動きを実現<br>（わりとなんでもできる）</td></tr>
</tbody></table>
<h2 id="javascriptとは-1"><a class="header" href="#javascriptとは-1">JavaScriptとは</a></h2>
<p><strong>JavaScript ≠ JAVA</strong></p>
<p>JavaScriptとJAVAの違い</p>
<table><thead><tr><th>JavaScript</th><th>JAVA</th></tr></thead><tbody>
<tr><td>フロントエンド言語</td><td>サーバサイド言語</td></tr>
<tr><td>カモミール</td><td>カモ</td></tr>
<tr><td>オーストラリア</td><td>オーストリア</td></tr>
<tr><td>ハムスター</td><td>ハム</td></tr>
<tr><td>メロンパン</td><td>メロン</td></tr>
</tbody></table>
<h2 id="webアプリケーションに欠かせないjavascript-1"><a class="header" href="#webアプリケーションに欠かせないjavascript-1">Webアプリケーションに欠かせないJavaScript</a></h2>
<p><img src="js/./img/js_introduction_web_app.svg" alt="Webアプリケーションのしくみ" /></p>
<h3 id="言語別人気ランキング2020年-1"><a class="header" href="#言語別人気ランキング2020年-1">言語別人気ランキング（2020年）</a></h3>
<table><thead><tr><th>言語</th><th>使用している開発者（%）</th></tr></thead><tbody>
<tr><td>JavaScript</td><td><code>||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||</code>69.7%</td></tr>
<tr><td>HTML/CSS</td><td><code>||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||</code>62.4%</td></tr>
<tr><td>SQL</td><td><code>|||||||||||||||||||||||||||||||||||||||||||||||||||||||||</code>56.9%</td></tr>
<tr><td>Python</td><td><code>||||||||||||||||||||||||||||||||||||||||||</code>41.6%</td></tr>
<tr><td>JAVA</td><td><code>||||||||||||||||||||||||||||||||||||||</code>38.4%</td></tr>
<tr><td>C#</td><td><code>||||||||||||||||||||||||||||||||</code>32.3%</td></tr>
<tr><td>TypeScript</td><td><code>||||||||||||||||||||||||||||</code>28.3%</td></tr>
<tr><td>PHP</td><td><code>||||||||||||||||||||||||||</code>25.8%</td></tr>
</tbody></table>
<p><a href="https://insights.stackoverflow.com/survey/2020/#technology-programming-scripting-and-markup-languages">ソース: https://insights.stackoverflow.com/survey/2020/#technology-programming-scripting-and-markup-languages</a></p>
<h2 id="javascript周辺の技術-1"><a class="header" href="#javascript周辺の技術-1">JavaScript周辺の技術</a></h2>
<p><img src="js/./img/js_introduction_around_js.svg" alt="JS周辺技術" /></p>
<h3 id="よく使われる技術-1"><a class="header" href="#よく使われる技術-1">よく使われる技術</a></h3>
<table><thead><tr><th>技術</th><th>特徴</th></tr></thead><tbody>
<tr><td><img src="js/./img/1280px-JQuery-Logo.svg.png" width="200px"></td><td>- JavaScriptのライブラリ．<br>- ユーザ操作イベントやアニメーションを実現<br>- ✅ 生JSと比較して短くかける．<br>- ✅ webアプリケーションで広く普及している．<br>- ✅ 導入が簡単．<br>- ✅ 学習コストが低い．<br>- 🔼 難しいことをやろうとすると複雑になる．<br>- まずはここから！</td></tr>
<tr><td><img src="js/./img/react-logo.png" width="200px"><br><img src="js/./img/Vue-logo-001.svg" width="200px"><br></td><td>- JavaScriptのライブラリ．<br>- ✅ モダンなwebアプリケーション（SPA）を実現<br>- ✅ 高速！<br>- ✅ TypeScriptでの実装も可能<br>- ✅ スマホアプリも見据えた開発が可能．<br>- 🔼 学習コスト<br>- 🔼 環境構築がややハードル．<br>- （私はReactが好き）</td></tr>
<tr><td><img src="js/./img/nodejs-logo-vector.svg" width="200px"></td><td>- サーバサイドでJavaScriptを動かす技術．<br>- ✅ フロントもサーバもJavaScriptで書ける．．！<br>- ✅ サーバサイドの中では環境構築が容易<br>- 🔼 難しいことをやろうとすると複雑になる．</td></tr>
</tbody></table>
<h2 id="javascriptを書く-1"><a class="header" href="#javascriptを書く-1">JavaScriptを書く</a></h2>
<h3 id="書き方-1"><a class="header" href="#書き方-1">書き方</a></h3>
<p><code>&lt;script&gt;&lt;/script&gt;</code>の間に処理を記述！</p>
<h3 id="書く場所-1"><a class="header" href="#書く場所-1">書く場所</a></h3>
<ul>
<li>htmlファイルの<code>&lt;/body&gt;</code>のすぐ上に書こう！</li>
<li>ほかにもいくつか書ける場所があります．</li>
<li>別にファイルを作るやり方もあります．</li>
</ul>
<h3 id="まず動かす-1"><a class="header" href="#まず動かす-1">まず動かす！！</a></h3>
<ul>
<li><code>alert()</code></li>
<li><code>console.log()</code></li>
</ul>
<blockquote>
<p>文字列は「<code>'</code>」か「<code>&quot;</code>」で囲む．どちらでもOK！</p>
</blockquote>
<pre><code class="language-html">&lt;script&gt;
  alert('Hello world');

  console.log('Hello world');

&lt;/script&gt;

</code></pre>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="変数と計算"><a class="header" href="#変数と計算">変数と計算</a></h1>
<h3 id="変数とは"><a class="header" href="#変数とは">変数とは</a></h3>
<p>「変数」は文字列や数値に名前をつけて，後から使用できるようにするもの．</p>
<p>プログラミングでは，ある部分で計算などして導出した値を別の部分で使用することが多い．</p>
<p>その際，毎回同じ計算を行うと不便であるため，1回計算した結果に名前をつけておき別の部分でそのまま使えるようにする．</p>
<h3 id="-key-point"><a class="header" href="#-key-point">💡 Key Point</a></h3>
<blockquote>
<p>変数には自分で名前をつけるが，「何の値なのか」がわかるように名前をつけることが極めて重要！！</p>
</blockquote>
<h3 id="変数のルール"><a class="header" href="#変数のルール">変数のルール</a></h3>
<p>プログラミングで使用する値には「数値」「文字列」などの型が存在する．</p>
<ul>
<li>「数値」は数学で扱う数と同様に計算できる．</li>
<li>「文字列」は開発者が決めたメッセージやキーワードなどである．英語でも日本語でも扱うことができ，<code>'</code>（シングルクォーテーション）か<code>&quot;</code>（ダブルクオーテーション）で囲む必要がある．</li>
<li>変数名の先頭が数字になるパターンはNG！</li>
</ul>
<pre><code class="language-js">const number1 = 100;
const number2 = 200;
const text1 = 'hello';
const text2 = 'world';
const 3text = 'JavaScript'; // NG

</code></pre>
<h3 id="-key-point-1"><a class="header" href="#-key-point-1">💡 Key Point</a></h3>
<blockquote>
<p>シングルクォーテーションとダブルクオーテーションはどちらでも良いが統一しよう！</p>
</blockquote>
<h2 id="数値の計算"><a class="header" href="#数値の計算">数値の計算</a></h2>
<p>数値は数学と同様に四則演算を行うことができる．</p>
<pre><code class="language-js">const number1 = 1 + 9;    // 10
const number2 = 1 - 5;    // -4
const number3 = 2 * 4;    //  8
const number4 = 10 / 2;   //  5
const number5 = 10 % 3;   //  1

</code></pre>
<h2 id="文字列の結合"><a class="header" href="#文字列の結合">文字列の結合</a></h2>
<p>文字列は「<code>+</code>」の計算を行うことができる．この場合は数学と異なり，前後の文字列が連結される．</p>
<pre><code class="language-js">const number1 = 100;
const number2 = 200;
const text1 = 'hello';
const text2 = 'world';
const sum1 = number1 + number2;   // 300
const sum2 = text1 + text2;   // helloworld

</code></pre>
<h3 id="-key-point-2"><a class="header" href="#-key-point-2">💡 Key Point</a></h3>
<blockquote>
<p><code>1</code>と<code>'1'</code>は異なるッ！</p>
</blockquote>
<h2 id="ngワード"><a class="header" href="#ngワード">NGワード</a></h2>
<p>変数名には使用できない単語が存在する</p>
<p>構文で使用するもの，将来的に使われるもの，など</p>
<ul>
<li>「<code>if</code>」「<code>for</code>」など</li>
</ul>
<p>このような単語は「予約語」と呼ばれる．</p>
<ul>
<li>「MDN javascript 予約語」で検索！！</li>
<li>引っかかる場合は少ないので今は気にしなくてOK！</li>
</ul>
<h2 id="練習"><a class="header" href="#練習">練習</a></h2>
<h3 id="以下の処理をjavascriptで実装しよう"><a class="header" href="#以下の処理をjavascriptで実装しよう">以下の処理をJavaScriptで実装しよう！</a></h3>
<ul>
<li>「<code>100</code>」と「<code>200</code>」の数値をそれぞれ変数に入れ，加算した結果を<code>alert()</code>で表示．</li>
<li>「<code>G's</code>」と「<code>ACADEMY</code>」の文字列をそれぞれ変数に入れ，つなげて<code>alert()</code>で表示．</li>
<li><code>js_practice.html</code>に記述しよう！</li>
</ul>
<h3 id="動作確認"><a class="header" href="#動作確認">動作確認</a></h3>
<p>それぞれ「300」と「G'sACADEMY」が表示されればOK！</p>
<h2 id="補足"><a class="header" href="#補足">補足</a></h2>
<blockquote>
<p>JavaScriptにおける変数の定義には「<code>const</code>」「<code>let</code>」「<code>var</code>」の3種類が存在する．</p>
<p>基本的には<code>const</code>を使用し，どうしてもな場合に<code>let</code>を使用すれば良いだろう．</p>
<pre><code class="language-js">const hoge = 100;
const hoge = 200;   // エラー（同じ名前で定義するのはNG）
hoge = 300;   // エラー（異なる値を入れ直すのはNG）

// 後から上書きできる変数
let fuga = 1000;
let fuga = 2000;    // エラー（同じ名前で定義するのはNG）
foo = 3000;   // OK（予期せぬ値が入ってしまう場合があるので注意）

// むかしあったやつ（使わないほうが良い）
var piyo = 99999;
var piyo = 88888;   // OK（あぶない）
piyo = 77777;   // OK（あぶない）

</code></pre>
</blockquote>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="ランダムな数乱数をつくる"><a class="header" href="#ランダムな数乱数をつくる">ランダムな数（乱数）をつくる</a></h1>
<h2 id="乱数とは"><a class="header" href="#乱数とは">乱数とは</a></h2>
<p>毎回異なる値が出てくる数のこと（例：1回目に実行したら1，2回目に実行したら4，など）．</p>
<p>JavaScriptには最初から乱数をつくれる処理が用意されている（<code>Math.random()</code>）のでこれを利用する．しかし，この処理は0から1の範囲で小数を発生させるため，<code>Math.floor()</code>を用いて整数に直す．</p>
<pre><code class="language-js">// 0から1の間でランダムな値（乱数）を表示．
const randomNumber1 = Math.random();
alert(randomNumber1);

// 0から4までのどれかが表示される！
const randomNumber2 = Math.floor(Math.random() * 5);
alert(randomNumber2);

</code></pre>
<h3 id="-key-point-3"><a class="header" href="#-key-point-3">💡 Key Point</a></h3>
<blockquote>
<p>乱数の処理は毎回これでいけるので，覚えるよりコピペ！</p>
</blockquote>
<h3 id="補足-1"><a class="header" href="#補足-1">補足</a></h3>
<p>JavaScriptの<code>Math.~</code>には多くの種類があり，絶対値を求めたり四捨五入したりする処理も存在する．</p>
<h2 id="練習-1"><a class="header" href="#練習-1">練習</a></h2>
<p><code>math.html</code>で以下の数をランダムに発生させて<code>alert();</code>で表示させよう！</p>
<table><thead><tr><th></th><th align="right">最小値</th><th align="right">最大値</th></tr></thead><tbody>
<tr><td>問題1</td><td align="right">0</td><td align="right">9</td></tr>
<tr><td>問題2</td><td align="right">1</td><td align="right">9</td></tr>
<tr><td>問題3</td><td align="right">5</td><td align="right">10</td></tr>
<tr><td>問題4</td><td align="right">50</td><td align="right">99</td></tr>
</tbody></table>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="条件分岐"><a class="header" href="#条件分岐">条件分岐</a></h1>
<h2 id="条件分岐-1"><a class="header" href="#条件分岐-1">条件分岐</a></h2>
<p>条件を満たすときと満たさないときで別々の処理を実行する！</p>
<pre><code class="language-js">if(`条件式`){
  // 条件式を満たす場合の処理
} else {
  // 条件式を満たさない場合の処理
}

</code></pre>
<p>複数の条件で処理を分岐させることもできる！</p>
<pre><code class="language-js">if(`条件式1`){
  // 条件式1を満たす場合の処理
} else if(`条件式2`) {
  // 条件式1と満たさなくて条件式2を満たす場合の処理
} else {
  // いずれの条件も満たさない場合の処理
}

</code></pre>
<h2 id="条件式"><a class="header" href="#条件式">条件式</a></h2>
<p>条件式は左辺と右辺の比較で行うことが多い（比較演算子）．</p>
<table><thead><tr><th>演算子</th><th>意味</th><th>補足</th></tr></thead><tbody>
<tr><td><code>==</code></td><td>左辺と右辺が等しい</td><td><code>1</code>と<code>'1'</code>は等しいと判定される．</td></tr>
<tr><td><code>===</code></td><td>左辺と右辺が等しい</td><td><code>1</code>と<code>'1'</code>は等しくないと判定される．</td></tr>
<tr><td><code>!=</code></td><td>左辺と右辺が等しくない</td><td><code>1</code>と<code>'1'</code>は等しいと判定される．</td></tr>
<tr><td><code>!==</code></td><td>左辺と右辺が等しくない</td><td><code>1</code>と<code>'1'</code>は等しくないと判定される．</td></tr>
<tr><td><code>&gt;</code></td><td>左辺が右辺より大きい</td><td></td></tr>
<tr><td><code>&lt;</code></td><td>左辺が右辺より小さい</td><td></td></tr>
<tr><td><code>&gt;=</code></td><td>左辺が右辺以上</td><td></td></tr>
<tr><td><code>&lt;=</code></td><td>左辺が右辺以下</td><td></td></tr>
</tbody></table>
<h3 id="-key-point-4"><a class="header" href="#-key-point-4">💡 Key Point</a></h3>
<blockquote>
<p>左辺と右辺が等しい場合に<code>a = b</code>のように記述してハマる．<code>a == b</code>が正解．</p>
</blockquote>
<h2 id="条件式の組み合わせ"><a class="header" href="#条件式の組み合わせ">条件式の組み合わせ</a></h2>
<p>条件式は複数組み合わせることができる．下記2種類がよく使われる．</p>
<ul>
<li>複数の条件式を全て満たす場合（AND条件）は条件式を<code>&amp;&amp;</code>でつなぐ．</li>
<li>複数の条件式のいずれかを満たす場合（OR条件）は条件式を<code>||</code>でつなぐ．</li>
</ul>
<pre><code class="language-js">if(`条件式1` &amp;&amp; `条件式2`){
  // 条件式1と条件式2を両方満たす場合の処理
} else {
  // 片方しか満たさない，両方満たさない場合の処理
}

if(`条件式1` || `条件式2`){
  // 条件式1か条件式2のどちらかを満たす場合の処理
} else {
  // 両方満たさない場合の処理
}

</code></pre>
<h3 id="-key-point-5"><a class="header" href="#-key-point-5">💡 Key Point</a></h3>
<blockquote>
<p>条件分岐を書くときははじめに構文（<code>if(){}else{}</code>）をつくってから条件や処理を書く！</p>
</blockquote>
<h2 id="練習-2"><a class="header" href="#練習-2">練習</a></h2>
<h3 id="乱数と条件分岐を組み合わせておみくじを実装"><a class="header" href="#乱数と条件分岐を組み合わせておみくじを実装">乱数と条件分岐を組み合わせておみくじを実装！</a></h3>
<p>ランダムに「大吉・中吉・小吉・凶・大凶」を<code>alert()</code>で表示！</p>
<p><code>omikuji01.html</code>に記述しよう！</p>
<h3 id="ヒント"><a class="header" href="#ヒント">ヒント！！</a></h3>
<ol>
<li><code>Math.rondom()</code>で0から4を発生させる．（&lt;- 前項でつくったものが使える．．！）</li>
<li>出た数値に応じて<code>if</code>文を使って条件分岐し，異なる内容を<code>alert()</code>で出力！</li>
</ol>
<p>毎回ランダムで「大吉・中吉・小吉・凶・大凶」のどれかが表示されればOK！</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="おみくじのwebアプリ実装"><a class="header" href="#おみくじのwebアプリ実装">おみくじのWebアプリ実装</a></h1>
<p>おみくじの処理自体はできたが，画面から操作できるWebアプリケーションにしたい！</p>
<h2 id="想定される挙動"><a class="header" href="#想定される挙動">想定される挙動</a></h2>
<ul>
<li>画面上のHTML要素（DOM）をクリックして処理を実行！</li>
<li>要素を「指定」する！</li>
<li>classやidでDOMを特定する．</li>
<li>指定したDOMに対してJavaScriptで操作を行う！</li>
</ul>
<h3 id="例"><a class="header" href="#例">例</a></h3>
<ul>
<li>「<code>id</code>が<code>button</code>」の要素を「クリック」したら．．．</li>
<li>「大吉-大凶のどれかをランダムに表示」！</li>
</ul>
<h3 id="参考dom"><a class="header" href="#参考dom">参考（DOM）</a></h3>
<blockquote>
<p>HTMLに記述されている各要素のこと（document object model）</p>
</blockquote>
<h2 id="基本の3要素"><a class="header" href="#基本の3要素">基本の3要素</a></h2>
<ul>
<li>selector（どこを）</li>
<li>event（いつ）</li>
<li>method（どうする）</li>
</ul>
<p><img src="js/js01/./img/20210622123450.png" alt="dom3要素" /></p>
<p>なんだけど．．．</p>
<pre><code>＿人人人人人人人人人人人人人人＿
＞　JavaScriptはDOM操作が苦手　＜
￣Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^￣
</code></pre>
<h2 id="jqueryライブラリ"><a class="header" href="#jqueryライブラリ">jQueryライブラリ</a></h2>
<h3 id="jqueryとは"><a class="header" href="#jqueryとは">jQueryとは</a></h3>
<ul>
<li>セレクタをcssと同じ要領で指定できる．</li>
<li>素のJavaScriptよりも短く書ける！</li>
<li>アニメーションなど手軽に設定できる．</li>
<li>書き方（順序や考え方）はJavaScriptと同様！</li>
<li>導入が簡単（フレームワークなどは環境構築で詰む）</li>
</ul>
<p><a href="https://webkikaku.co.jp/homepage/blog/hpseisaku/webdesign/jquery_start/">【参考】https://webkikaku.co.jp/homepage/blog/hpseisaku/webdesign/jquery_start/</a></p>
<h3 id="-key-point-6"><a class="header" href="#-key-point-6">💡 Key Point</a></h3>
<blockquote>
<p>jQueryはJavaScriptのDOM操作を短縮して書けるライブラリ</p>
</blockquote>
<h3 id="補足-2"><a class="header" href="#補足-2">補足</a></h3>
<blockquote>
<p>ライブラリは他の開発者がつくったコードを利用させてもらうイメージ．手間のかかる処理を一発で書けるように実装してくれている．</p>
</blockquote>
<h3 id="ライブラリ読み込み"><a class="header" href="#ライブラリ読み込み">ライブラリ読み込み</a></h3>
<p>（jQueryに限らず）ライブラリはソースコードの読み込みが必要！！</p>
<p>（読み込みのコードは毎回同じなのでコピペでOK！）</p>
<pre><code class="language-html">&lt;!-- 🔽 ここで読み込み 🔽 --&gt;
&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  // 自分で書いた処理
&lt;/script&gt;
</code></pre>
<h3 id="-key-point-7"><a class="header" href="#-key-point-7">💡 Key Point</a></h3>
<blockquote>
<p>ライブラリを使用する場合は「自分で書くJavaScriptより上の行で」読み込むこと．ライブラリで決められた関数を実行しようとして，読み込みが終わっていない状態だとエラーになってしまう．</p>
</blockquote>
<h2 id="jqueryの書き方と動き方"><a class="header" href="#jqueryの書き方と動き方">jQueryの書き方と動き方</a></h2>
<p>基本の考え方はJavaScriptと全く同じッ！</p>
<p><img src="js/js01/./img/20210622123450.png" alt="dom3要素" /></p>
<h3 id="コード例"><a class="header" href="#コード例">コード例</a></h3>
<ul>
<li><code>id</code>が<code>button</code>の要素を</li>
<li>クリックしたときに</li>
<li>アラートを出す</li>
</ul>
<pre><code class="language-js">$('#button').on('click', function () {
  alert('Hello World!');
});

</code></pre>
<p>コード内でそれぞれ以下の場所で指定している．</p>
<pre><code class="language-js">$(`セレクタ名`).on(`イベント名`, function () {
  `実行したい処理（メソッド）`
});

</code></pre>
<p>今回は<code>id</code>で指定しているが，セレクタの指定方法はたくさんある．イベントもたくさんある．</p>
<ul>
<li>「<code>jQuery セレクタ</code>」でググる！</li>
<li>「<code>jQuery イベント</code>」でググる！</li>
</ul>
<h2 id="まずは形の入力に慣れよう"><a class="header" href="#まずは形の入力に慣れよう">まずは形の入力に慣れよう！</a></h2>
<p>いろいろな処理を書く前に，形の入力に慣れることが大事！！（慣れないとしょうもないスペルミスで時間溶かす）</p>
<pre><code class="language-js">$('#id').on('click', function () {
  // ...
});

</code></pre>
<h3 id="喋りながら書くと定着する本当"><a class="header" href="#喋りながら書くと定着する本当">喋りながら書くと定着する（本当）</a></h3>
<blockquote>
<p>だらーあいでぃーおんくりっくふぁんくしょんかっこかっこなみかっこえんたー...</p>
</blockquote>
<h2 id="練習-3"><a class="header" href="#練習-3">練習</a></h2>
<p>おみくじアプリケーションを完成させよう！</p>
<h3 id="仕様"><a class="header" href="#仕様">仕様</a></h3>
<ul>
<li>「おみくじを引くボタン」をクリックしたら以下のどれかを画面に表示！</li>
<li>「大吉・中吉・小吉・凶・大凶」</li>
</ul>
<h3 id="ヒント-1"><a class="header" href="#ヒント-1">ヒント</a></h3>
<p>下記の流れで考えよう！</p>
<ul>
<li>ボタンをクリックしたらなにかする．</li>
<li>ランダムな数値を発生させる．</li>
<li>条件分岐をつくって，対応する「大吉，中吉，...」を画面に表示させる．</li>
</ul>
<pre><code class="language-js">$('#button').on('click', function () {
  // 0から4でランダムな数を作成
  // 0だったら大吉，1だったら中吉．．．
  // 結果をidで指定した場所に表示
});

</code></pre>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="課題"><a class="header" href="#課題">課題</a></h1>
<p><strong>じゃんけんアプリを実装！！！！！</strong></p>
<h2 id="じゃんけんアプリの仕様"><a class="header" href="#じゃんけんアプリの仕様">じゃんけんアプリの仕様</a></h2>
<ol>
<li>「グー」「チョキ」「パー」のボタンを設置</li>
<li>どれかをクリックしたら「コンピュータの出した手は？」を変更
<ul>
<li>「コンピュータ：グー」「コンピュータ：チョキ」など</li>
</ul>
</li>
<li>「結果は？」の箇所に
<ul>
<li>「あなたの負け」「あなたの勝ち」「あいこ」のどれかを表示！</li>
</ul>
</li>
</ol>
<p>※上記を最低ラインとして製作</p>
<p>※これを土台にしてガンガン発展させよう！！</p>
<h2 id="課題に対する考え方"><a class="header" href="#課題に対する考え方">課題に対する考え方</a></h2>
<table><thead><tr><th>✅</th><th>❎</th></tr></thead><tbody>
<tr><td>オリジナリティを表現する</td><td>誰かに言われたものを作る</td></tr>
<tr><td>プロダクトを創る</td><td>プログラムを書く</td></tr>
<tr><td><strong>自分が好きなものをつくる</strong></td><td>受けが良さそうなものをつくる</td></tr>
</tbody></table>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="js_メモパッド"><a class="header" href="#js_メモパッド">JS_メモパッド</a></h1>
<h2 id="本講義の内容とゴール-1"><a class="header" href="#本講義の内容とゴール-1">本講義の内容とゴール</a></h2>
<h3 id="本講義の内容-1"><a class="header" href="#本講義の内容-1">本講義の内容</a></h3>
<ul>
<li>配列や繰り返し処理に触れる．</li>
<li>ブラウザにデータを保存する．</li>
<li>複数件のデータをまとめる処理を実装する．</li>
</ul>
<h3 id="本講義のゴール-1"><a class="header" href="#本講義のゴール-1">本講義のゴール</a></h3>
<ul>
<li>いろいろなデータ形式を知る！</li>
<li>データの扱いになれる！</li>
<li>データを保存・読み出しをマスターする！</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="配列"><a class="header" href="#配列">配列</a></h1>
<h2 id="配列arrayとは"><a class="header" href="#配列arrayとは">配列（array）とは</a></h2>
<ul>
<li>複数の値に順番をつけてまとめて扱う方法．奥が深い．超強い．</li>
<li>順番を「インデックス」と呼ぶ．「0」からスタート！
<ul>
<li>プログラミングでは「数字は0から始める」（稀に例外もあり）</li>
</ul>
</li>
</ul>
<pre><code class="language-js">const array = ['大吉', '中吉', '小吉', '凶', '大凶'];
alert(array[0]);

</code></pre>
<h2 id="配列の作り方"><a class="header" href="#配列の作り方">配列の作り方</a></h2>
<p>下記のどちらかで作成可能．どちらでも良い（1が多い）．</p>
<ol>
<li><code>[]</code>で囲い，要素をカンマで区切る．</li>
<li><code>new Array()</code>の<code>()</code>内に要素をカンマ区切りで入れる．</li>
</ol>
<pre><code class="language-js">const list01 = ['月', '火', '水', '木', '金', '土', '日'];
const list02 = new Array('月', '火', '水', '木', '金', '土', '日&quot;);
console.log(list01);

</code></pre>
<h3 id="-key-point-8"><a class="header" href="#-key-point-8">💡 Key Point</a></h3>
<blockquote>
<p>配列はブラウザの検証画面に出力すると構造や内容が確認しやすい．</p>
</blockquote>
<h2 id="配列の長さ"><a class="header" href="#配列の長さ">配列の長さ</a></h2>
<p>配列の要素数を「長さ」と呼ぶ．長さは<code>配列名.length</code>で取得することができる．</p>
<p>繰り返し処理などで非常に有用である（後述）．</p>
<pre><code class="language-js">console.log(list01.length);   // 7

</code></pre>
<h2 id="配列のいいぞ"><a class="header" href="#配列のいいぞ">配列のいいぞ．．．</a></h2>
<p>条件分岐なんていらんかったんや．．．</p>
<pre><code class="language-js">const hands = ['グー', 'チョキ', 'パー'];
const randomNumber = Math.floor(Math.random() * hands.length);
const computerHand = hands[randomNumber];

console.log(computerHand);

</code></pre>
<p>結果のテーブルをつくるのもありやな．．．</p>
<pre><code class="language-js">const resultTable = [
  ['draw', 'win', 'lose'],
  ['lose', 'draw', 'win'],
  ['win', 'lose', 'draw'],
];

const userHand = 0;
const computerHand = 1;

const result = resultTable[userHand][computerHand];

console.log(result);

</code></pre>
<h2 id="よくある配列の処理"><a class="header" href="#よくある配列の処理">よくある配列の処理</a></h2>
<p>配列には値を追加したり削除したりできる．</p>
<pre><code class="language-js">const list01 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

// 先頭に追加
list01.unshift(0);    // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

// 末尾に追加
list01.push(11);    // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]

// 先頭を削除
list01.shift();   // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]

// 末尾を削除
list01.pop();   // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

// 反転
list01.reverse();   // [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]

</code></pre>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="繰り返し処理"><a class="header" href="#繰り返し処理">繰り返し処理</a></h1>
<h2 id="繰り返し処理とは"><a class="header" href="#繰り返し処理とは">繰り返し処理とは</a></h2>
<p>同じ処理を指定した回数実行するやり方</p>
<ul>
<li>同じ処理を100回実行したいときに100回書くのか．．？</li>
<li>配列と相性が良い！</li>
<li>超むずい（使っていてもきちんと説明できないことも．．．）</li>
</ul>
<h2 id="書き方-2"><a class="header" href="#書き方-2">書き方</a></h2>
<p>繰り返し処理では次の3つの条件を指定する．</p>
<ol>
<li>開始条件</li>
<li>繰り返しを続ける条件</li>
<li>回数のカウントの仕方</li>
</ol>
<pre><code class="language-js">for(`開始条件`; `繰り返しを続ける条件`; `回数のカウントの仕方`){
  // 実際に繰り返したい処理
}

</code></pre>
<h3 id="-key-point-9"><a class="header" href="#-key-point-9">💡 Key Point</a></h3>
<blockquote>
<p>if文と同じく，まず構文の形をつくってしまおう．</p>
</blockquote>
<h2 id="コード例-1"><a class="header" href="#コード例-1">コード例</a></h2>
<ul>
<li>「<code>i</code>」の値を使って繰り返しをコントロールする．</li>
<li>条件をセミコロン「<code>;</code>」で区切る点に注意！！</li>
<li><code>i++</code>は「<code>i</code>を1ずつ増やす」を意味する．</li>
<li>「<code>i=0</code>で<code>{}</code>内を実行」「<code>i=1</code>で<code>{}</code>内を実行」...の繰り返し．</li>
</ul>
<pre><code class="language-js">for(let i=0; i &lt; 100; i++){
  console.log(i);
}

</code></pre>
<p>上のコードは以下と同じ意味．「<code>i &lt; 100</code>」なので99まで実行したら終了．</p>
<pre><code class="language-js">console.log(0);
console.log(1);
console.log(2);
// ...
console.log(98);
console.log(99);

</code></pre>
<h2 id="繰り返しの使用例"><a class="header" href="#繰り返しの使用例">繰り返しの使用例</a></h2>
<p>1901年から2021年を選択できる<code>&lt;select&gt;</code>を作成する．処理の流れは以下．</p>
<ol>
<li>開始年と終了年を定義しておく．</li>
<li>出力用の空文字を用意しておく．</li>
<li>繰り返し処理で「開始条件に開始年」「終了条件に終了年」を指定してタグを作成し，空文字に追加する．</li>
<li>繰り返し処理が終わったら指定した場所に出力する．</li>
</ol>
<pre><code class="language-js">// 1
const start = 1901;
const end = 2021;

// 2
let option = '';

// 3
for(let i = start; i &lt;= end; i++){
  option += '&lt;option&gt;' + i + '&lt;/option&gt;';
}

// 4
$('#hoge').html(option);

</code></pre>
<h2 id="繰り返し処理との組み合わせ"><a class="header" href="#繰り返し処理との組み合わせ">繰り返し処理との組み合わせ</a></h2>
<p>繰り返し処理を用いると配列内の要素を順番に使うことができる．<code>length</code>を使用すると配列の長さに関わらず対応できる．</p>
<pre><code class="language-js">const list01 = ['月', '火', '水', '木', '金', '土', '日'];

for(let i = 0; i &lt; list01.length; i++){
  console.log(list01[i]);
}

</code></pre>
<h2 id="配列と繰り返しでブラウザに要素を表示"><a class="header" href="#配列と繰り返しでブラウザに要素を表示">配列と繰り返しでブラウザに要素を表示</a></h2>
<p>よく出てくるパターン．データが入った配列からデータを取り出して画面に表示したい場面は多い．</p>
<p>流れは以下のとおり．</p>
<ol>
<li>空の出力用配列を用意しておく．</li>
<li>繰り返し処理を用いて，配列からデータを取り出し，タグに入れて1の配列に追加する．</li>
<li>繰り返し処理が終わったら出力用の配列を画面上の指定した部分に出力する．</li>
</ol>
<pre><code class="language-js">const list01 = ['月', '火', '水', '木', '金', '土', '日'];

// 1
const array = [];

// 2
for(let i = 0; i &lt; list01.length; i++){
  array.push('&lt;p&gt;' + list01[i] + '&lt;/p&gt;');
}

// 3
$('#echo').html(array);

</code></pre>
<h2 id="繰り返し処理のバリエーション"><a class="header" href="#繰り返し処理のバリエーション">繰り返し処理のバリエーション</a></h2>
<p>似たような構文がいくつか存在する．とりあえず好きなものを使用すればOK．</p>
<pre><code class="language-js">const list = [1, 2, 3, 4, 5];

for (let i = 0; i &lt; list.length; i++) {
  console.log(list[i]);
}

for (let x of list) {
  console.log(x);
}

list.forEach(function (x) {
  console.log(x);
})

</code></pre>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="オブジェクト"><a class="header" href="#オブジェクト">オブジェクト</a></h1>
<h2 id="オブジェクトとは"><a class="header" href="#オブジェクトとは">オブジェクトとは</a></h2>
<ul>
<li>配列と同様に複数の値を管理する方法</li>
<li>配列の「インデックス」に対して「キー」「バリュー」で管理．</li>
</ul>
<pre><code class="language-js">const jojo01 = {
  number: 1,
  title: 'ファントムブラッド',
  hero: 'ジョナサン・ジョースター',
  rival: 'ディオ・ブランドー',
  sound: 'メメタァ',
};
console.log(jojo01.sound);
console.log(jojo01['sound']);

</code></pre>
<h2 id="配列とオブジェクトの組み合わせ"><a class="header" href="#配列とオブジェクトの組み合わせ">配列とオブジェクトの組み合わせ</a></h2>
<p>この形は非常に多い．今後もたくさん出てくるので慣れておくことを推奨するッ！！</p>
<pre><code class="language-js">const jojo = [
  {
    number: 1,
    title: 'ファントムブラッド',
    hero: 'ジョナサン・ジョースター',
  },
  {
    number: 2,
    title: '戦闘潮流',
    hero: 'ジョセフ・ジョースター',
  },
  {
    number: 3,
    title: 'スターダストクルセイダース',
    hero: '空条承太郎',
  },
];

console.log(jojo[0].title);	// ファントムブラッド
console.log(jojo[2].hero);	// 空条承太郎

</code></pre>
<h2 id="練習-4"><a class="header" href="#練習-4">練習</a></h2>
<p>配列の練習</p>
<ul>
<li><code>list/array.html</code></li>
</ul>
<p>オブジェクトの練習</p>
<ul>
<li><code>list/object.html</code></li>
</ul>
<p>上記が楽勝な人</p>
<ul>
<li><code>list/challenge.html</code></li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="localstorageメモ帳初級"><a class="header" href="#localstorageメモ帳初級">LocalStorage（メモ帳初級）</a></h1>
<h2 id="localstorageとは"><a class="header" href="#localstorageとは">LocalStorageとは</a></h2>
<h3 id="変数やオブジェクトの問題"><a class="header" href="#変数やオブジェクトの問題">変数やオブジェクトの問題</a></h3>
<ul>
<li>ブラウザをリロードすると初期化される．</li>
<li>次回読み込んだときまで値を保存したいときにつらい！</li>
</ul>
<h3 id="localstorageができること"><a class="header" href="#localstorageができること">LocalStorageができること</a></h3>
<ul>
<li>ブラウザにデータを保存できる！
<ul>
<li>テキスト形式のデータのみ．</li>
</ul>
</li>
<li>「オリジン単位」ごとに5MBまで保存できる．</li>
<li>（自分で削除しないと永続的に保存される）</li>
</ul>
<blockquote>
<p>オリジン単位とは「http://www.example.com:80」のような「プロトコル://ドメイン名:ポート番号」のこと．</p>
<p><a href="https://gihyo.jp/dev/serial/01/javascript-security/0004?page=2">参考: https://gihyo.jp/dev/serial/01/javascript-security/0004?page=2</a></p>
</blockquote>
<h2 id="本日実装するアプリケーション"><a class="header" href="#本日実装するアプリケーション">本日実装するアプリケーション</a></h2>
<h3 id="メモ帳をつくろう"><a class="header" href="#メモ帳をつくろう">メモ帳をつくろう！</a></h3>
<ul>
<li>ブラウザ上のテキストエリアにメモを入力．</li>
<li>ブラウザに情報を保存．</li>
<li>リロードしても情報が保存されるようにする．</li>
</ul>
<h3 id="仕様-1"><a class="header" href="#仕様-1">仕様</a></h3>
<ul>
<li>saveボタンをクリックしたら情報を保存．</li>
<li>clearボタンをクリックしたら情報を削除．</li>
<li>リロード時に情報が保存されていれば自動的に表示．</li>
</ul>
<h3 id="完成イメージ"><a class="header" href="#完成イメージ">完成イメージ</a></h3>
<p>LocalStorageの内容は検証画面から確認できる．</p>
<p>「Application」 -&gt; 「LocalStorage」の順にクリックすると確認できる（下図の赤枠部分）．</p>
<p><img src="js/js02/./img/20210620233121.png" alt="メモ帳初級画面" /></p>
<h2 id="localstorageの使い方"><a class="header" href="#localstorageの使い方">LocalStorageの使い方</a></h2>
<h3 id="しくみ"><a class="header" href="#しくみ">しくみ</a></h3>
<p>「key」と「value」の形式でデータを保存する．key名を変えれば複数保存できるッ！</p>
<table><thead><tr><th>key</th><th>value</th></tr></thead><tbody>
<tr><td>memo01</td><td>コード！書かずにはいられないッ！</td></tr>
<tr><td>memo02</td><td>最終的に．．．動けばよかろうなのだァァァァッ！！</td></tr>
<tr><td>memo03</td><td>過程や！方法なぞ！どうでもよいのだァーッ</td></tr>
</tbody></table>
<h3 id="javascriptでの扱い方"><a class="header" href="#javascriptでの扱い方">JavaScriptでの扱い方</a></h3>
<p>今回はデータの登録（すでに同じkeyが存在する場合は上書き）とデータの取得を扱う．</p>
<table><thead><tr><th>内容</th><th>JavaScriptの書き方</th></tr></thead><tbody>
<tr><td>データ登録</td><td><code>localStorage.setItem(key, value);</code></td></tr>
<tr><td>データ取得</td><td><code>localStorage.getItem(key);</code></td></tr>
<tr><td>データ更新</td><td><code>localStorage.setItem(key, value);</code></td></tr>
<tr><td>データ削除</td><td><code>localStorage.removeItem(key);</code></td></tr>
<tr><td>データ全削除</td><td><code>localStorage.clear();</code></td></tr>
<tr><td>データの長さ</td><td><code>localStorage.length;</code></td></tr>
<tr><td>データの順番</td><td><code>localStorage.key(インデックス);</code></td></tr>
</tbody></table>
<h2 id="メモ帳に必要な処理"><a class="header" href="#メモ帳に必要な処理">メモ帳に必要な処理</a></h2>
<h3 id="1-データを保存するときの処理"><a class="header" href="#1-データを保存するときの処理">1. データを保存するときの処理</a></h3>
<ol>
<li>saveボタンのクリックでイベント発火．</li>
<li>テキストエリアの情報を取得．</li>
<li>LocalStorageに情報を保存．</li>
</ol>
<h3 id="2-データを削除するときの処理"><a class="header" href="#2-データを削除するときの処理">2. データを削除するときの処理</a></h3>
<ol>
<li>clearボタンクリックでイベント発火．</li>
<li>LocalStorageの情報を消去．</li>
<li>画面上の入力欄をクリア．</li>
</ol>
<h3 id="3-データを取得するときの処理"><a class="header" href="#3-データを取得するときの処理">3. データを取得するときの処理</a></h3>
<ol>
<li>読み込み時にLocalStorageのデータ有無を確認．</li>
<li>保存されていれば情報を取得．</li>
<li>テキストエリアに情報を表示．</li>
</ol>
<h2 id="データを保存するときの処理"><a class="header" href="#データを保存するときの処理">データを保存するときの処理</a></h2>
<ol>
<li>saveボタンのクリックでイベント発火．</li>
<li><code>.val()</code>でテキストエリアの情報を取得．</li>
<li><code>localStorage.setItem()</code>でLocalStorageに情報を保存．</li>
</ol>
<pre><code class="language-js">// memo01.html

$('#save').on('click', function () {
  const text = $('#text_area').val();
  localStorage.setItem('memo', text);
});

</code></pre>
<h3 id="-key-point-10"><a class="header" href="#-key-point-10">💡 Key Point</a></h3>
<blockquote>
<p>「localStorage」は手打ちせず補完に頼る！！</p>
</blockquote>
<h2 id="データを削除するときの処理"><a class="header" href="#データを削除するときの処理">データを削除するときの処理</a></h2>
<ol>
<li>clearボタンクリックでイベント発火．</li>
<li>key名を指定してLocalStorageの情報を消去．</li>
<li>画面上の入力欄をクリア（空文字で上書きする）．</li>
</ol>
<pre><code class="language-js">// memo01.html

$('#clear').on('click', function () {
  localStorage.removeItem('memo');
  $('#text_area').val('');
});

</code></pre>
<blockquote>
<p>「<code>.val()</code>」は<code>()</code>内に何か入れると入れた値で上書きする！</p>
</blockquote>
<h2 id="データを取得するときの処理"><a class="header" href="#データを取得するときの処理">データを取得するときの処理</a></h2>
<ol>
<li>読み込み時に条件分岐を用いてLocalStorageのデータ有無を確認．</li>
<li>保存されていれば情報を取得．</li>
<li>テキストエリアに情報を表示．</li>
</ol>
<pre><code class="language-js">// memo01.html

if (localStorage.getItem('memo')) {
  const text = localStorage.getItem('memo');
  $('#text_area').val(text);
}

</code></pre>
<blockquote>
<p>データがないのに処理しようとするとエラーになってしまう．データがないときは何もしない．</p>
</blockquote>
<h2 id="練習-5"><a class="header" href="#練習-5">練習</a></h2>
<p><code>memo01.html</code>に以下の処理を順番に実装しよう．</p>
<ol>
<li>saveボタンクリック時にデータの保存</li>
<li>clearボタンクリック時にデータの消去</li>
<li>読み込み時にデータの取得</li>
</ol>
<p>LocalStorageの中身は検証画面から確認しよう．それぞれ以下の状態になればOK！</p>
<ul>
<li>保存時にデータが保存され，検証画面から確認できる．</li>
<li>消去時に保存してあるデータが消去される．</li>
<li>リロード時に保存しているデータがあれば画面に表示される．</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="jsonデータメモ帳中級"><a class="header" href="#jsonデータメモ帳中級">JSONデータ（メモ帳中級）</a></h1>
<h2 id="メモ帳初級の問題点"><a class="header" href="#メモ帳初級の問題点">メモ帳初級の問題点</a></h2>
<p>データが1件しか保存できない．複数のメモを個別に残しておきたいときに困る．</p>
<h2 id="複数件のデータを管理する"><a class="header" href="#複数件のデータを管理する">複数件のデータを管理する</a></h2>
<p>配列かオブジェクトを使えば複数件のデータをまとめることができる．これを用いればメモ欄が複数になっても管理できそうである．</p>
<h2 id="だめです"><a class="header" href="#だめです">だめです</a></h2>
<p>配列やオブジェクトは言語毎に形式が異なるため互換性がない（JavaScriptの配列はJavaScriptでしか扱えない）．</p>
<p>つまり，LocalStorageも配列やオブジェクトを保存することはできない．</p>
<p><img src="js/js02/./img/js_localstorage_json01.svg" alt="json解説01" /></p>
<h2 id="互換性のあるデータであるjson形式"><a class="header" href="#互換性のあるデータであるjson形式">互換性のあるデータであるJSON形式</a></h2>
<p>Webアプリケーションは複数の言語で構成されていることが多い．このような場合にお互いのデータをやり取りするため，互換性のある「JSON形式」が準備されている．</p>
<p>各言語では「自前の配列やオブジェクト」と「JSON形式のデータ」を相互に変換する処理が準備されている．</p>
<p><img src="js/js02/./img/js_localstorage_json02.svg" alt="json解説02" /></p>
<h2 id="メモ帳中級編のイメージ"><a class="header" href="#メモ帳中級編のイメージ">メモ帳中級編のイメージ</a></h2>
<p>タイトルと本文をまとめて保存できるようにする！</p>
<p><img src="js/js02/./img/20210620235722.png" alt="" /></p>
<h2 id="jsonの扱い方"><a class="header" href="#jsonの扱い方">JSONの扱い方</a></h2>
<p>JavaScriptには（他の言語でも）「配列やオブジェクトをJSONに変換する処理」と「JSONを配列やオブジェクトに戻す処理」が用意されている．</p>
<h3 id="配列やオブジェクトをjsonに変換する処理"><a class="header" href="#配列やオブジェクトをjsonに変換する処理">配列やオブジェクトをJSONに変換する処理</a></h3>
<p><code>JSON.stringify()</code>でJSON形式に変換できる．</p>
<pre><code class="language-js">const data = {
  title: '波紋の使い方',
  text: 'メメタァ'
};

const jsonData = JSON.stringify(data);
localStorage.setItem('memo', jsonData);

</code></pre>
<h3 id="jsonを配列やオブジェクトに戻す処理"><a class="header" href="#jsonを配列やオブジェクトに戻す処理">JSONを配列やオブジェクトに戻す処理</a></h3>
<p><code>JSON.parse()</code>でJSON形式から戻すことができる．</p>
<pre><code class="language-js">const jsonData = localStorage.getItem('memo');
const data = JSON.parse(jsonData);
console.log(data)

</code></pre>
<h2 id="練習-6"><a class="header" href="#練習-6">練習</a></h2>
<p>タイトルと本文の両方を保存できるメモ帳を実装しよう．</p>
<ul>
<li>動き方はメモ帳初級編と同様</li>
<li>saveボタンクリック時に
<ul>
<li>タイトルと本文の値を取得してまとめる．</li>
<li>まとめたデータをJSON形式に変換する．</li>
<li>JSON形式のデータをLocalStorageに保存．</li>
</ul>
</li>
<li>clearボタンクリック時にデータを消去</li>
<li>読み込み時に
<ul>
<li>LocalStorageからJSON形式のデータを取得する．</li>
<li>JSON形式のデータをオブジェクトに戻す．</li>
<li>オブジェクトからデータを取り出して画面に表示する．</li>
</ul>
</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="課題-1"><a class="header" href="#課題-1">課題</a></h1>
<p><strong>LocalStorageを使った何かを作ろう</strong></p>
<ul>
<li>タブで複数記述できるメモ帳</li>
<li>じゃんけんのスコア保存</li>
<li>ゲームのセーブ&amp;ロード機能</li>
<li>保存したデータをグラフ表示</li>
</ul>
<blockquote>
<p>大事なのは「データを保存できる」「データを読み出せる」の2点！</p>
<p>これを用いて何ができるか考えるのだッ！！</p>
</blockquote>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="js_firebase"><a class="header" href="#js_firebase">JS_Firebase</a></h1>
<h2 id="事前準備"><a class="header" href="#事前準備">事前準備</a></h2>
<p>今回はGoogleのアカウントを使用します！</p>
<p>無料で取得できますので，事前に作成しておいてください！</p>
<ul>
<li>すでにお持ちの方は既存のアカウントでOKです！</li>
</ul>
<h2 id="本講義の内容とゴール-2"><a class="header" href="#本講義の内容とゴール-2">本講義の内容とゴール</a></h2>
<h3 id="本講義の内容-2"><a class="header" href="#本講義の内容-2">本講義の内容</a></h3>
<ul>
<li>関数を定義し，動かす一連の動作を実装する．</li>
<li>オンライン上のデータベースにデータを保存する．</li>
<li>オンライン上のデータを取得し，画面上にリアルタイムに表示する．</li>
</ul>
<h3 id="本講義のゴール-2"><a class="header" href="#本講義のゴール-2">本講義のゴール</a></h3>
<ul>
<li>関数を使って処理を実装できるようになる！</li>
<li>オンライン&amp;リアルタイムでデータ共有する！</li>
<li>複雑なデータを扱う場合にどう考えるかを把握する！</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="関数"><a class="header" href="#関数">関数</a></h1>
<h2 id="関数functionとは"><a class="header" href="#関数functionとは">関数（function）とは</a></h2>
<ul>
<li>関数とは記述した処理をまとめて名前をつけて使い回せるようにしたもの．</li>
<li>一度処理を定義してしまえば，呼び出すだけで実行可能！</li>
</ul>
<h3 id="例-1"><a class="header" href="#例-1">例</a></h3>
<ul>
<li>関数には「定義」と「実行」が必要．</li>
<li>関数には必ず名前をつける．</li>
<li><code>{}</code>内に実行してほしい処理を記述する．</li>
<li>「実行」したいときは名前を呼び出す．</li>
</ul>
<pre><code class="language-js">// 関数の定義
function test(){
  console.log('関数は便利！');
}

// 関数の実行
test();

</code></pre>
<h2 id="引数と戻り値"><a class="header" href="#引数と戻り値">引数と戻り値</a></h2>
<p>関数は「なにかを入力して」「処理した結果を出力する」動きが基本となる．</p>
<h3 id="引数"><a class="header" href="#引数">引数</a></h3>
<p>引数とは「関数に入力する値」である．</p>
<ul>
<li>定義した関数に対して，処理に必要な値を入力する．</li>
<li>引数の数は一つでも複数でもOK！</li>
</ul>
<h3 id="戻り値"><a class="header" href="#戻り値">戻り値</a></h3>
<p>戻り値とは「関数から出力されてくる値」である．</p>
<ul>
<li>関数の中で計算などを実行した後，結果を返す処理．</li>
<li>関数内の変数，配列，オブジェクトなどで返せる．</li>
</ul>
<h3 id="例-2"><a class="header" href="#例-2">例</a></h3>
<p><code>a</code>と<code>b</code>の2つの数を入力し，「加算した結果」を出力する関数を考える．</p>
<p>この場合，<code>a</code>と<code>b</code>が「引数」で<code>total</code>が戻り値となる．</p>
<pre><code class="language-js">// 関数の定義
function add(a, b){
  const total = a + b;
  return total;
}

// 関数の実行
const sum = add(10, 20);
console.log(sum);   // 30

</code></pre>
<h2 id="数学の関数と同じ"><a class="header" href="#数学の関数と同じ">数学の関数と同じ</a></h2>
<p>プログラミングの関数は理解が難しいものの一つであるが，数学の関数と同じイメージを持つと理解しやすい．</p>
<h3 id="数学の関数"><a class="header" href="#数学の関数">数学の関数</a></h3>
<p>数学の関数は「何かの数値を入力」すると「決まった計算を実行した結果を出力」するものである．</p>
<p>例えば，<code>f(x) = x^2 + 2x + 1</code>と関数を定義すると．．．</p>
<ul>
<li><code>f(2) = 9</code>,</li>
<li><code>f(5) = 36</code>,</li>
<li><code>f(10) = 121</code></li>
</ul>
<p>となる．この場合，入力値・関数・出力値をまとめると以下のようになる．</p>
<table><thead><tr><th>入力値</th><th>関数</th><th>出力値</th></tr></thead><tbody>
<tr><td>2</td><td><code>f(x) = x^2 + 2x + 1</code></td><td>9</td></tr>
<tr><td>5</td><td><code>f(x) = x^2 + 2x + 1</code></td><td>36</td></tr>
<tr><td>10</td><td><code>f(x) = x^2 + 2x + 1</code></td><td>121</td></tr>
</tbody></table>
<h3 id="プログラミングの関数"><a class="header" href="#プログラミングの関数">プログラミングの関数</a></h3>
<p>上記の例をJavaScriptで書くと以下のようになる．</p>
<pre><code class="language-js">function calculate(x) {
  const result = x * x + 2 * x + 1;
  return result;
}

calculate(2);   // 9
calculate(5);   // 36
calculate(10);    // 121

</code></pre>
<p>この場合も「記述の仕方が異なるだけでやっていることは同じ」である．</p>
<table><thead><tr><th>入力値</th><th>関数</th><th>出力値</th></tr></thead><tbody>
<tr><td>2</td><td><code>calculate(x)</code></td><td>9</td></tr>
<tr><td>5</td><td><code>calculate(x)</code></td><td>36</td></tr>
<tr><td>10</td><td><code>calculate(x)</code></td><td>121</td></tr>
</tbody></table>
<h3 id="-key-point-11"><a class="header" href="#-key-point-11">💡 Key Point</a></h3>
<blockquote>
<p>引数と戻り値がない場合もある（ややこしいポイント）</p>
</blockquote>
<h2 id="言語にはじめから用意されている関数"><a class="header" href="#言語にはじめから用意されている関数">言語にはじめから用意されている関数</a></h2>
<p>これまでに使用した乱数関連も関数であるが，これらはJavaScriptがはじめから用意している関数である．</p>
<p>このような関数を「ビルドイン関数」と呼ぶ．</p>
<p>対して，開発者が自ら定義した関数を「ユーザ定義関数」と呼ぶ．</p>
<table><thead><tr><th align="right">引数</th><th>関数</th><th align="right">戻り値</th></tr></thead><tbody>
<tr><td align="right">なし</td><td><code>Math.random();</code></td><td align="right">0.534714863872</td></tr>
<tr><td align="right">3.1415926535</td><td><code>Math.floor(3.1415926535);</code></td><td align="right">3</td></tr>
</tbody></table>
<pre><code class="language-js">Math.random();    // 0.534714863872
  // 引数： なし
  // 戻り値： 0.534714863872

Math.floor(3.1415926535);   // 3
  // 引数： 3.1415926535
  // 戻り値： 3

</code></pre>
<h2 id="参考関数の記述方法"><a class="header" href="#参考関数の記述方法">【参考】関数の記述方法</a></h2>
<p>JavaScriptにおける関数の定義は以下の3種類を用いることができる．どの方法で記述しても実行方法は同じ．</p>
<p>（現段階では）どれでも同様と考えてOK．</p>
<pre><code class="language-js">function add1(a, b){
  return a + b;
}

const add2 = function(a, b){
  return a + b;
}

const add3 = (a, b) =&gt; {
  return a + b;
}

// 全部同じという理解でOK！
const result1 = add1(10, 20);
const result2 = add2(10, 20);
const result3 = add3(10, 20);

</code></pre>
<h2 id="関数の利用"><a class="header" href="#関数の利用">関数の利用</a></h2>
<h3 id="関数の利点"><a class="header" href="#関数の利点">関数の利点</a></h3>
<p>イベントごとに毎回同じ処理を書くのは面倒！</p>
<p>関数を定義しておけば，ボタン押したら実行するだけ！</p>
<h3 id="例-3"><a class="header" href="#例-3">例</a></h3>
<p>押したボタンに応じて，異なる範囲の乱数を発生させたい！</p>
<pre><code class="language-js">// 関数の定義
function generateRandomNumber(min, max){
  const rand = Math.floor(Math.random() * (max - min + 1) + min);
  return rand;
}

// 実行するときはこんな感じ
const result = generateRandomNumber(1, 9);
console.log(result);

</code></pre>
<h3 id="ボタンクリックイベントと組み合わせ"><a class="header" href="#ボタンクリックイベントと組み合わせ">ボタンクリックイベントと組み合わせ</a></h3>
<p>ボタンによって異なる範囲の乱数を発生させることもできる．</p>
<pre><code class="language-js">$('#btn01').on('click', function () {
 const result = generateRandomNumber(1, 10);
  $('#echo').text(result);
});

$('#btn02').on('click', function () {
 const result = generateRandomNumber(10, 20);
  $('#echo').text(result);
});

$('#btn03').on('click', function () {
 const result = generateRandomNumber(20, 100);
  $('#echo').text(result);
});

</code></pre>
<p>【参考】janken.htmlに関数を使用したじゃんけんの例もあります！</p>
<h2 id="練習-7"><a class="header" href="#練習-7">練習</a></h2>
<ul>
<li>最小値と最大値を入力してランダムな数を返す関数を定義しよう！</li>
<li>各ボタンのクリック時に関数を実行し，結果を<code>#echo</code>に出力しよう！</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="リアルタイムチャットの実装"><a class="header" href="#リアルタイムチャットの実装">リアルタイムチャットの実装</a></h1>
<h2 id="今回実装するアプリケーション"><a class="header" href="#今回実装するアプリケーション">今回実装するアプリケーション</a></h2>
<p>LocalStorageを利用したメモ帳アプリケーションでは，データを「ブラウザ」自体に保存する処理を実装した．</p>
<p>今回は更に発展させ，オンライン上にデータを保存する処理を実装し，リアルタイムに表示が更新されるチャットアプリケーションを実装する．</p>
<p><img src="js/js04/./img/js_firebase_about_chat_app.svg" alt="チャットアプリケーションのイメージ" /></p>
<p>このような動きを実装するために，Googleが提供する「Firebase」を活用する．</p>
<h2 id="firebasecloud-firestoreとは"><a class="header" href="#firebasecloud-firestoreとは">Firebase（Cloud Firestore）とは</a></h2>
<p>Firebaseは、クライアントからアクセス可能なデータベースとしてFirebase Realtime Database( 以下 Realtime Database)とCloud Firestoreの2つを用意しています．</p>
<p>Realtime Databaseは，リアルタイムでクライアント全体の状態を同期させる必要があるモバイルアプリ向けの効率的で低レイテンシなものです．</p>
<p>Realtime Databaseはクラウド上でホスティングされるNoSQLのデータベースです．データはすべてのクライアントにわたってリアルタイムに同期され、アプリがオフラインになっても利用可能です．クロスプラットフォームアプリを構築した場合でも，すべてのクライアン トが1つのRealtime Databaseを共有して，最新のデータへの更新を自動的に行います．またクライアントからも直接アクセスが可能なため自前のサーバなしで使えるデータベースとしても活用できます．</p>
<p>Cloud Firestoreは，直感的な新しいデータモデルで，Realtime Databaseの性能をさらに向上しており，Realtime Databaseよりも豊かで高速なクエリとスケールを備えています．Cloud Firestoreは2017年のGoogle I/Oで発表されたプロダクトであり，2018年5月現在はベータ版リリースです．</p>
<p>引用：WEB+DB PRESS vol.105 第4章（※2019年2月より正式版として運用されています．）</p>
<h2 id="つまり"><a class="header" href="#つまり">つまり．．？</a></h2>
<ul>
<li>サーバ上にデータを保存できる！</li>
<li>保存したデータをリアルタイムに同期できる！</li>
<li>異なるデバイスでもデータを共有可能！
<ul>
<li>PCとスマホでリアルタイムにデータを同期できる．</li>
</ul>
</li>
<li>JavaScriptのみで実装可能！
<ul>
<li>Swift, Go, Pythonなど他の言語でも使用可！</li>
</ul>
</li>
</ul>
<table><thead><tr><th></th><th>データの保存場所</th><th>データを使用できる範囲</th></tr></thead><tbody>
<tr><td>LocalStorage</td><td>ブラウザ</td><td>自分のPC（ブラウザ）</td></tr>
<tr><td>Firebase</td><td>オンライン上のサーバ</td><td>同じアプリケーションを動かしている端末全て</td></tr>
</tbody></table>
<p>Firebaseを活用するにはアカウントやプロジェクトの準備が必要になるため，次項から進める．</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="firebaseの準備1プロジェクトの作成"><a class="header" href="#firebaseの準備1プロジェクトの作成">Firebaseの準備1（プロジェクトの作成）</a></h1>
<p>まずはFirebaseの「プロジェクト」を作成する．</p>
<p>Firebaseでは「プロジェクト」単位で管理を行う．</p>
<h2 id="管理画面へのアクセス"><a class="header" href="#管理画面へのアクセス">管理画面へのアクセス</a></h2>
<p>下記URLにアクセスしよう．</p>
<p><a href="https://firebase.google.com/">https://firebase.google.com/</a></p>
<ul>
<li>アクセスしたら右上の「ログイン」からログインする．</li>
<li>すでにログイン済みの場合は「コンソールへ移動」をクリックする．</li>
</ul>
<h2 id="プロジェクトの作成"><a class="header" href="#プロジェクトの作成">プロジェクトの作成</a></h2>
<p>下記画面から「プロジェクトの作成」をクリックする．</p>
<p><img src="js/js04/./img/20210616120245.png" alt="Firebaseプロジェクト作成" /></p>
<p>プロジェクトの名前を入力する．何のアプリケーションなのかわかるように名前をつけると良い．</p>
<p>同意するに✅を入れて「続行」をクリックする．</p>
<p><img src="js/js04/./img/20210616120512.png" alt="Firebaseプロジェクト情報入力1" /></p>
<p>アナリティクスは使用しないので外す．外さないとエラーが出ることがあるので外すこと．</p>
<p><img src="js/js04/./img/20210616120730.png" alt="アナリティクス外す" /></p>
<p>「プロジェクトを作成」をクリックして少し待つとプロジェクトが作成される．「続行」をクリックすると画面が切り替わる．</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="firebaseの準備2ソースコードの準備"><a class="header" href="#firebaseの準備2ソースコードの準備">Firebaseの準備2（ソースコードの準備）</a></h1>
<h2 id="プロジェクトとjavascriptの連携"><a class="header" href="#プロジェクトとjavascriptの連携">プロジェクトとJavaScriptの連携</a></h2>
<p>画面の下記部分をクリックする．</p>
<p><img src="js/js04/./img/20210616122043.png" alt="Webアプリ追加" /></p>
<p>ニックネームを入力するよう促されるので適当に入力する（プロジェクト名と同じが良い？）．</p>
<p>「Firebase Hosting」の✅は入れないこと．「アプリを登録」をクリックすると次の画面に切り替わる．</p>
<p><img src="js/js04/./img/20210616122207.png" alt="ニックネーム設定" /></p>
<p>コードが表示されるので全てコピーする．</p>
<p><img src="js/js04/./img/20210616122317.png" alt="コードコピー" /></p>
<p><code>chatapp.html</code>にコピーしたコードを貼り付ける．このコードがFirebaseのプロジェクトとソースコードでやり取りをするために必要になる．</p>
<p>貼り付けた<code>&lt;script&gt;</code>タグの中身を修正する．</p>
<blockquote>
<p>修正前</p>
<p><code>&lt;script src=&quot;https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js&quot;&gt;&lt;/script&gt;</code></p>
</blockquote>
<blockquote>
<p>修正後</p>
<p><code>&lt;script src=&quot;https://www.gstatic.com/firebasejs/8.6.7/firebase.js&quot;&gt;&lt;/script&gt;</code></p>
</blockquote>
<p>エディタ上で下記のような状態になっていればOK！</p>
<pre><code class="language-html">&lt;!-- chatapp.html --&gt;
&lt;!-- ここにFirebaseのコードを貼り付けよう --&gt;

&lt;!-- The core Firebase JS SDK is always required and must be listed first --&gt;
&lt;script src=&quot;https://www.gstatic.com/firebasejs/8.6.7/firebase.js&quot;&gt;&lt;/script&gt;

&lt;!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries --&gt;

&lt;script&gt;
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: &quot;AIzaSyBPm676fTHNHq2_hogehoge_wryyyyyy&quot;,
    authDomain: &quot;chat-app-test-4e1e4.firebaseapp.com&quot;,
    projectId: &quot;chat-app-test-4e1e4&quot;,
    storageBucket: &quot;chat-app-test-4e1e4.appspot.com&quot;,
    messagingSenderId: &quot;929064315016&quot;,
    appId: &quot;1:929064315016:web:79dd676be9a71b1803173d&quot;
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
&lt;/script&gt;

</code></pre>
<p>コードを貼り付けたらブラウザ画面の「コンソールに進む」ボタンをクリックする．</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="firebaseの準備3データベースの準備"><a class="header" href="#firebaseの準備3データベースの準備">Firebaseの準備3（データベースの準備）</a></h1>
<h2 id="データベースの準備"><a class="header" href="#データベースの準備">データベースの準備</a></h2>
<p>データを実際に保存するためのデータベースを準備する．</p>
<p>コンソール画面から「構築」 -&gt; 「Firestore Database」 -&gt; 「データベースを作成」の順にクリック．</p>
<p><img src="js/js04/./img/20210616123536.png" alt="db準備" /></p>
<p>ルールは必ず「テストモードで開始」を選択して「次へ」をクリック．</p>
<p><img src="js/js04/./img/20210616123750.png" alt="dbルール設定" /></p>
<p>ロケーションは適当でOK．「有効にする」をクリックすると次の画面に移動する．</p>
<p><img src="js/js04/./img/20210616123858.png" alt="dbロケーション設定" /></p>
<h2 id="コレクションの作成"><a class="header" href="#コレクションの作成">コレクションの作成</a></h2>
<p>データを保存する際には「コレクション」と「ドキュメント」という単位で管理する．</p>
<p>これらは「フォルダ」と「ファイル」の関係によく似ている．</p>
<p><a href="https://firebase.google.com/docs/firestore/data-model?hl=ja">参考（ドキュメント）</a></p>
<table><thead><tr><th></th><th>データの容器</th><th>データの単位</th></tr></thead><tbody>
<tr><td>PC</td><td>フォルダ</td><td>ファイル</td></tr>
<tr><td>Firestore</td><td>コレクション</td><td>ドキュメント</td></tr>
</tbody></table>
<p>Firestoreの機能を利用するには「コレクション」を作成してテストデータを入力しておく．下記画面の「コレクションを開始」をクリックする．</p>
<p><img src="js/js04/./img/20210616124349.png" alt="コレクション開始" /></p>
<p>コレクションIDに「<code>chat</code>」を入力し「次へ」をクリックする．</p>
<p><img src="js/js04/./img/20210616124917.png" alt="コレクション作成" /></p>
<p>テスト用のドキュメントを作成する．ドキュメントの構成はメッセージを送信したユーザ名の<code>name</code>，メッセージの本文である<code>text</code>，送信日時を表す<code>time</code>の3項目とする．</p>
<p>下記の手順でドキュメントを作成しよう．</p>
<ul>
<li>ドキュメントIDは「自動ID」をクリック．</li>
<li>フィールドには「<code>name</code>」「<code>text</code>」「<code>time</code>」の3項目を設定．</li>
<li><code>name</code>と<code>text</code>には<code>String</code>，<code>time</code>には<code>timestamp</code>形式を選択する．</li>
<li>各フィールドには適当な値を入力しておく．</li>
</ul>
<p>設定したら「保存」をクリックする．</p>
<p><img src="js/js04/./img/20210616125231.png" alt="ドキュメント作成" /></p>
<p>下記のようにデータが保存されていればデータベースの準備は完了！</p>
<p><img src="js/js04/./img/20210616125644.png" alt="データ確認" /></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="チャット画面の実装とデータの送信"><a class="header" href="#チャット画面の実装とデータの送信">チャット画面の実装とデータの送信</a></h1>
<h2 id="チャット画面の実装"><a class="header" href="#チャット画面の実装">チャット画面の実装</a></h2>
<p>nameとtextの入力欄を作成する．</p>
<p>送信時にidを指定して入力した値を取得するため，<code>&lt;input&gt;</code>タグの2箇所と<code>&lt;button&gt;</code>にidを指定する．</p>
<pre><code class="language-html">&lt;!-- chatapp.html --&gt;

&lt;form&gt;
  &lt;fieldset&gt;
    &lt;legend&gt;チャット入力画面&lt;/legend&gt;
    &lt;div&gt;
      name: &lt;input type=&quot;text&quot; id=&quot;name&quot;&gt;
    &lt;/div&gt;
    &lt;div&gt;
      text: &lt;input type=&quot;text&quot; id=&quot;text&quot;&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;button type=&quot;button&quot; id=&quot;send&quot;&gt;send&lt;/button&gt;
    &lt;/div&gt;
  &lt;/fieldset&gt;
&lt;/form&gt;

</code></pre>
<p>下図のような画面となる．</p>
<p><img src="js/js04/./img/20210616144514.png" alt="チャット入力画面" /></p>
<h2 id="データ送信の処理"><a class="header" href="#データ送信の処理">データ送信の処理</a></h2>
<p>続いて，上記の入力画面でnameとtextを入力して送信ボタンをクリックしたタイミングでFirestore上に新しいデータを作成する処理を実装する．</p>
<h3 id="リアルタイム通信の準備"><a class="header" href="#リアルタイム通信の準備">リアルタイム通信の準備</a></h3>
<p>前項で作成したコレクションとやり取りをするため，下記のコードを追記する．追記場所は張り付けたFirebase関連のコード下くらいでOK．</p>
<h3 id="-key-point-12"><a class="header" href="#-key-point-12">💡 Key Point</a></h3>
<blockquote>
<p>このコードでは<code>chat</code>コレクションの接続情報を<code>db</code>に保存する．この1行を書いておくことで<code>db</code>に対してデータの追加や取得ができるようになる．</p>
</blockquote>
<pre><code class="language-js">// chatapp.html

const db = firebase.firestore().collection('chat');

</code></pre>
<h3 id="送信ボタンクリック時にデータを送信"><a class="header" href="#送信ボタンクリック時にデータを送信">送信ボタンクリック時にデータを送信</a></h3>
<p>続いて，送信ボタンクリック時にデータを送信する処理を実装する．</p>
<p>まずはボタンのクリックイベントを作成．</p>
<pre><code class="language-js">// chatapp.html

$('#send').on('click', function () {
  // 送信時に必要な処理
});

</code></pre>
<p>続いてクリックイベント内に「入力値を取得する処理」と「データを送信する処理」を記述する．</p>
<p>ポイントは，</p>
<ul>
<li>id指定して<code>.val()</code>で入力値を取得する．</li>
<li>データを送信する際にはオブジェクト形式にする必要がある．</li>
<li><code>time</code>はFirestoreの独自形式となるため，Firestore側で用意されている関数を使用する．</li>
</ul>
<pre><code class="language-js">// chatapp.html

const data = {
  name: $('#name').val(),
  text: $('#text').val(),
  time: firebase.firestore.FieldValue.serverTimestamp(),
};
db.add(data);
$('#text').val('');

</code></pre>
<h2 id="動作確認-1"><a class="header" href="#動作確認-1">動作確認</a></h2>
<p>コードを記述したらブラウザの画面から<code>name</code>と<code>text</code>を入力して．．．</p>
<p><img src="js/js04/./img/20210616145454.png" alt="動作確認（ブラウザ）" /></p>
<p>Firebaseのコンソール画面でデータが保存されていればOK！</p>
<p><img src="js/js04/./img/20210616145647.png" alt="動作確認（コンソール）" /></p>
<h2 id="練習-8"><a class="header" href="#練習-8">練習</a></h2>
<p>下記の処理を実装し，Firestoreにデータを保存しよう！</p>
<ol>
<li>入力画面の作成</li>
<li>データの送信処理</li>
</ol>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="データのリアルタイム取得と画面表示"><a class="header" href="#データのリアルタイム取得と画面表示">データのリアルタイム取得と画面表示</a></h1>
<h2 id="保存されているデータの扱い"><a class="header" href="#保存されているデータの扱い">保存されているデータの扱い</a></h2>
<p>Firestoreではデータの取得方法はいくつか用意されているが，最大の特徴は「データベースの変更を検知して自動的にデータを取得できる」ことである．</p>
<p>（本来はサーバ側の言語での実装が必要であり，難易度も高い．WebSocketなどの実装が必要）</p>
<h2 id="処理の流れ"><a class="header" href="#処理の流れ">処理の流れ</a></h2>
<p>流れは送信と比較して複雑となる．理由は以下のとおり．</p>
<ul>
<li>動作のタイミングがつかみにくい．</li>
<li>取得したデータが非常に複雑な状態．</li>
<li>必要な3項目を取得するためにFirestore側で用意された関数を使用する必要がある．</li>
</ul>
<h2 id="データの取得"><a class="header" href="#データの取得">データの取得</a></h2>
<p>まずはFirestore上に保存されているデータを取得してconsoleに出力する．</p>
<ul>
<li>データに変更（追加，更新，削除など）が生じたタイミングで実行される<code>.onSnapshot()</code>を使用する．</li>
<li><code>.onSnapshot()</code>はデータベース上でデータの変更が発生したタイミングで<code>{}</code>内の処理を実行する．</li>
<li>Firestore上に保存されているデータは<code>querySnapshot.docs</code>に入っている．</li>
</ul>
<pre><code class="language-js">// chatapp.html

db.onSnapshot(function (querySnapshot) {
  console.log(querySnapshot.docs);
});

</code></pre>
<h2 id="データの取り出し"><a class="header" href="#データの取り出し">データの取り出し</a></h2>
<p>上記<code>querySnapshot.docs</code>は非常に複雑な形となっており，このまま扱うことは難しい．</p>
<p>そのため，必要なデータのみ抽出した「オブジェクト形式の配列」に変換する．</p>
<ol>
<li>空の配列を準備．</li>
<li><code>querySnapshot.docs</code>に対して繰り返し処理を用いて各要素に対して，
<ul>
<li><code>.id</code>でドキュメントID（名前）を取得する．</li>
<li><code>.data()</code>でドキュメント中身（3項目）を取得する．</li>
</ul>
</li>
<li>上記のデータのみを1で用意した配列に追加．</li>
</ol>
<pre><code class="language-js">// chatapp.html
// 前項の`console.log()`下に記述

const dataArray = [];
querySnapshot.docs.forEach(function (doc) {
  const data = {
    id: doc.id,
    data: doc.data(),
  };
  dataArray.push(data);
});

console.log(dataArray);

</code></pre>
<h3 id="-key-point-13"><a class="header" href="#-key-point-13">💡 Key Point</a></h3>
<blockquote>
<p>難しい形式のデータは変換して「自分が慣れている形式」に変換すると扱いやすい．</p>
</blockquote>
<h2 id="画面表示するためのタグ生成"><a class="header" href="#画面表示するためのタグ生成">画面表示するためのタグ生成</a></h2>
<p>必要な情報のみを抽出した配列が作成できたため，この配列から画面表示用のタグを作成する．</p>
<p>前項で作成した<code>dataArray</code>を基にして，</p>
<ol>
<li>空の配列を準備する．</li>
<li><code>dataArray</code>に繰り返しを用い，各要素をタグの形にする．</li>
<li>繰り返し処理終了後に指定したid部分に出力する．</li>
</ol>
<pre><code class="language-js">// chatapp.html
// 前項の`console.log()`下に記述

const tagArray = [];
dataArray.forEach(function (data) {
  tagArray.push(`
    &lt;div id=&quot;${data.id}&quot;&gt;
      &lt;p&gt;${data.data.name} at ${data.data.time}&lt;/p&gt;
      &lt;p&gt;${data.data.text}&lt;/p&gt;
    &lt;/div&gt;
  `);
});

$('#output').html(tagArray);

</code></pre>
<h2 id="動作確認-2"><a class="header" href="#動作確認-2">動作確認</a></h2>
<p>上記のコードを記述すると「Firestore上でデータが変更されたタイミング」で<code>{}</code>内の処理が実行され，最新のデータが画面に反映される．</p>
<p><img src="js/js04/./img/20210616152526.png" alt="データ取得" /></p>
<p>また，「Firestore上でデータが変更されたタイミング」で動作するため，複数タブで片方だけ操作した状態でもう片方の動作を確認することができる．</p>
<h2 id="練習-9"><a class="header" href="#練習-9">練習</a></h2>
<p>下記の順番でデータの表示を実装しよう．</p>
<ol>
<li>データ本体を取得．</li>
<li>データから必要なものだけを抽出．</li>
<li>抽出したデータからタグを作成．</li>
<li>タグを画面に表示．</li>
</ol>
<p>入力フォームからデータを送信し，一覧に追加されればOK．</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="機能追加"><a class="header" href="#機能追加">機能追加</a></h1>
<p>データの取得と表示（データ送信と同時に画面更新）は実装ができたが，下記の問題点がある．</p>
<ul>
<li>時刻がわかりにくい．</li>
<li>最新がどれなのかわかりにくい．</li>
</ul>
<p>これらを解決するために以下の処理を実装していく．</p>
<h2 id="時刻データの表示形式変更"><a class="header" href="#時刻データの表示形式変更">時刻データの表示形式変更</a></h2>
<p>JavaScriptにおいて時刻処理は非常に煩雑である．時刻関連の処理を実装するためにはライブラリを使用したほうが実装の負荷が少なくバグも少ない．</p>
<h3 id="時刻変換関数"><a class="header" href="#時刻変換関数">時刻変換関数</a></h3>
<p>今回はサンプルコード内に時刻の形式を変換する関数（下記）を記述しておいたため，これを利用する．解説は省略．</p>
<pre><code class="language-js">// chatapp.html内に記述してある関数

function convertTimestampToDatetime(timestamp) {
  const _d = timestamp ? new Date(timestamp * 1000) : new Date();
  const Y = _d.getFullYear();
  const m = (_d.getMonth() + 1).toString().padStart(2, '0');
  const d = _d.getDate().toString().padStart(2, '0');
  const H = _d.getHours().toString().padStart(2, '0');
  const i = _d.getMinutes().toString().padStart(2, '0');
  const s = _d.getSeconds().toString().padStart(2, '0');
  return `${Y}/${m}/${d} ${H}:${i}:${s}`;
}

</code></pre>
<h3 id="関数を利用"><a class="header" href="#関数を利用">関数を利用</a></h3>
<p>本関数を利用して，タグ生成部分の処理で時刻形式を変換する．</p>
<pre><code class="language-js">// chatapp.html

const tagArray = [];
dataArray.forEach(function (data) {
  tagArray.push(`
    &lt;div id=&quot;${data.id}&quot;&gt;
      &lt;p&gt;${data.data.name} at ${convertTimestampToDatetime(data.data.time.seconds)}&lt;/p&gt;
      &lt;p&gt;${data.data.text}&lt;/p&gt;
    &lt;/div&gt;
  `);
});

</code></pre>
<h3 id="動作確認-3"><a class="header" href="#動作確認-3">動作確認</a></h3>
<p>下記のように人間が認識しやすい形式になって表示される．</p>
<p><img src="js/js04/./img/20210616154031.png" alt="時刻形式変換" /></p>
<h2 id="データの並び替え"><a class="header" href="#データの並び替え">データの並び替え</a></h2>
<p>本アプリケーションはチャット機能がメインであるため，送信日時が新しいメッセージが上部に表示されることが望ましい．</p>
<p>しかし，初期状態ではFirestore上のID名順でデータを取得しているため，<code>time</code>でソートされた状態でデータを取得できるようにしたい．</p>
<ul>
<li>データのソートには<code>.orderBy()</code>を利用する．</li>
<li><code>.orderBy()</code>には2つのデータを入力する．1つ目は「どの項目で並び替えをするか」2つ目は「昇順（<code>asc</code>）か降順（<code>desc</code>）」である．</li>
</ul>
<p>データ取得時の処理に追記する．</p>
<pre><code class="language-js">// chatapp.html

db.orderBy('time', 'desc').onSnapshot(function (querySnapshot) {
  // 省略
});

</code></pre>
<p>ブラウザで並び順が変更されているか確認しよう．</p>
<h2 id="おまけenterキーで送信"><a class="header" href="#おまけenterキーで送信">【おまけ】Enterキーで送信</a></h2>
<p>ボタンクリックではなく，メッセージ入力時にEnterキーを押して送信することもできる．</p>
<p>この場合，イベント情報から「入力したキーを識別するキーコード」を抽出してキーを判別する．</p>
<ul>
<li><code>function (e)</code>の<code>e</code>にイベント情報（この場合<code>keydown</code>）で取得可能なデータが格納される．</li>
<li><code>e.keyCode</code>でどのキーを押したかが識別可能であるため，Enterのキーコードを調べておけば条件分岐でデータ送信を行える．</li>
</ul>
<pre><code class="language-js">// chatapp.html

$('#text').on('keydown', function (e) {
  if (e.keyCode === 13) {
    const data = {
      name: $('#name').val(),
      text: $('#text').val(),
      time: firebase.firestore.FieldValue.serverTimestamp(),
    };
    db.add(data);
    $('#text').val('');
  }
});

</code></pre>
<p>このように，JavaScriptではイベントに関連した情報を取得することができる．これらを用いて画面の特定の部分をクリックしたときだけ発火させたり，決まった順にタイプしたときだけ発火させたりできる．</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="課題と提出時の注意点"><a class="header" href="#課題と提出時の注意点">課題と提出時の注意点</a></h1>
<p><strong>Firebaseを使用したアプリを実装しよう！</strong></p>
<p>Firebaseを用いることで複数の端末での双方向的なやり取りを実装することが可能となる．</p>
<p>今回はデータを追加していく方式で実装したが，データを削除したり上書きしたりすることも可能だ．</p>
<p>今回使用したFirestore以外にも様々な機能がある．本気出せばWebアプリケーションを全て実装してデプロイできるだけの可能性を秘めた技術であるッ！</p>
<ul>
<li>認証（Authentication）</li>
<li>ファイル保存（Storage）</li>
<li>デプロイ（Hosting）</li>
<li>サーバサイドの実装（Functions）</li>
</ul>
<h2 id="実装例"><a class="header" href="#実装例">実装例</a></h2>
<ul>
<li>スタンプ送信機能</li>
<li>オンラインでじゃんけん</li>
<li>出席管理システム</li>
<li>オリジナルSNS</li>
<li>MMORPGを開発</li>
</ul>
<h2 id="-注意点"><a class="header" href="#-注意点">⚠️ 注意点</a></h2>
<h3 id="apiキーの扱い"><a class="header" href="#apiキーの扱い">APIキーの扱い</a></h3>
<ul>
<li>FirebaseにはAPIキーが必要になります．</li>
<li>誰でも見られるGithubにあげてしまうとあまりよろしくない．</li>
</ul>
<p>Githubにpushする前に．．．</p>
<ul>
<li><code>git add .</code>する前にAPIキー部分は一旦削除しておきましょう．</li>
<li>提出フォームのコメント欄にAPIキーを記述してください！</li>
</ul>
<pre><code class="language-html">&lt;script&gt;
  // Your web app's Firebase configuration
  var firebaseConfig = {
    // 🔽この1行を`git add .`する前に一旦削除！削除したAPIキーは「提出フォームのAPIkey欄」に記述！
    apiKey: &quot;AIzaSyBPm676fTHNHq2_hogehoge_wryyyyyy&quot;,
    authDomain: &quot;chat-app-test-4e1e4.firebaseapp.com&quot;,
    projectId: &quot;chat-app-test-4e1e4&quot;,
    storageBucket: &quot;chat-app-test-4e1e4.appspot.com&quot;,
    messagingSenderId: &quot;929064315016&quot;,
    appId: &quot;1:929064315016:web:79dd676be9a71b1803173d&quot;
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
&lt;/script&gt;

</code></pre>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="js_api"><a class="header" href="#js_api">JS_API</a></h1>
<h2 id="事前準備-1"><a class="header" href="#事前準備-1">事前準備</a></h2>
<p>今回はマイクロソフトのアカウントを使用します！</p>
<p>無料で取得できますので，事前に作成しておいてください！</p>
<ul>
<li>下記参考サイトの「既に持ってるメアドを使う場合」でアカウントを作りましょう．</li>
<li>すでにお持ちの方は既存のアカウントでOKです！</li>
<li>不明点あればslackにコメントください！</li>
</ul>
<p><a href="https://kaoruya.org/blog/ms-account/#i-3">https://kaoruya.org/blog/ms-account/#i-3</a></p>
<h2 id="本講義の内容とゴール-3"><a class="header" href="#本講義の内容とゴール-3">本講義の内容とゴール</a></h2>
<h3 id="本講義の内容-3"><a class="header" href="#本講義の内容-3">本講義の内容</a></h3>
<ul>
<li>Google Books APIを用いたリクエストとレスポンスを扱う．</li>
<li>Bing Maps APIを用いて外部APIを用いた画面操作を行う．</li>
<li>自身のアイデアを元にAPIを探す．</li>
</ul>
<h3 id="本講義のゴール-3"><a class="header" href="#本講義のゴール-3">本講義のゴール</a></h3>
<ul>
<li>Webアプリケーションにおけるリクエストとレスポンスの概念を把握する．</li>
<li>JavaScriptを用いたAPI連携処理を実装することで，処理の基本的な流れを理解する．</li>
<li>自分のアイデアから関連するAPIを探し，実装にチャレンジできるようになる．</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="apiとは"><a class="header" href="#apiとは">APIとは</a></h1>
<h2 id="apiの意味合い"><a class="header" href="#apiの意味合い">APIの意味合い</a></h2>
<p>Application Programming Interfaceの略．</p>
<p>あるアプリケーション（例えばGoogle MapやTwitterなど）の一部を外部に向けて公開することにより，第三者が開発したソフトウェアに機能を組み込めるようにしたものである．</p>
<p>世の中に存在するサービスの機能の一部を使わせてもらえるイメージ！</p>
<blockquote>
<p>Interface</p>
<ul>
<li>Interfaceは「あるもの」と「あるもの」をつなぐもの，という意味合い．</li>
<li>今回は（すでに動いている）アプリケーションと（開発者が実装する）プログラムをつなぐ．</li>
</ul>
</blockquote>
<h2 id="apiの一例"><a class="header" href="#apiの一例">APIの一例</a></h2>
<table><thead><tr><th>API名</th><th>概要</th></tr></thead><tbody>
<tr><td>Bing Maps API</td><td>リクエストに応じてブラウザに地図を表示したり，ルート検索したりする．</td></tr>
<tr><td>Google Books API</td><td>Google Booksが持っている書籍の情報から，キーワードなど指定してデータ- を返す．</td></tr>
<tr><td>Open Weather Map API</td><td>都市名や緯度経度を指定して，その日の天気や天気予報の情報を返す．</td></tr>
</tbody></table>
<h2 id="apiの利点"><a class="header" href="#apiの利点">APIの利点</a></h2>
<ul>
<li>他社のデータを利用できる！</li>
<li>自分で作らなくて良いので開発速度がアップ！</li>
<li>いろいろなAPIを組み合わせてアプリケーションを実装できる！</li>
</ul>
<h2 id="動き方のイメージ"><a class="header" href="#動き方のイメージ">動き方のイメージ</a></h2>
<p>基本は「リクエスト」と「レスポンス」！</p>
<p>API（外部のサーバ）にJavaScriptでリクエスト（要求）を送信し，API側にデータを返してもらったり処理を実行してもらったりする．</p>
<p>Webアプリケーションのサーバ側の処理をAPIに行ってもらうイメージ！</p>
<p><img src="js/js05/./img/js_api_about_api.svg" alt="APIの動き方" /></p>
<h3 id="apiにリクエストを送信してデータをもらうタイプこちらが一般的"><a class="header" href="#apiにリクエストを送信してデータをもらうタイプこちらが一般的">APIにリクエストを送信してデータをもらうタイプ（こちらが一般的）</a></h3>
<p>検索条件などを指定して，条件に合う情報を送ってもらう．</p>
<table><thead><tr><th>API</th><th>送信するデータ</th><th>受け取れるデータ</th></tr></thead><tbody>
<tr><td>Google Books API</td><td>本のタイトルに含まれるキーワード，著者，出版社，出版年，etc...</td><td>条件に該当する本のデータ</td></tr>
<tr><td>Open Weather Map API</td><td>都市名，緯度経度，etc</td><td>現在の気象情報，一週間分の天気予報，etc...</td></tr>
<tr><td>テキスト解析</td><td>テキストデータ</td><td>テキストの感情データ，要，約，etc...</td></tr>
<tr><td>画像認識</td><td>画像データ</td><td>画像に映っているもの名称，位置，etc...</td></tr>
<tr><td>音声認識</td><td>音声データ</td><td>音声を文字起こししたテキスト</td></tr>
</tbody></table>
<h3 id="apiに定められたコードを実行してブラウザを操作してもらうタイプ"><a class="header" href="#apiに定められたコードを実行してブラウザを操作してもらうタイプ">APIに定められたコードを実行してブラウザを操作してもらうタイプ</a></h3>
<p>条件を指定して，実際にブラウザ表示などをやってもらう．</p>
<table><thead><tr><th>API</th><th>やってもらえること</th></tr></thead><tbody>
<tr><td>Bing Maps API</td><td>場所などを指定して地図を表示，ルート検索，住所を緯度経度に変換，etc...</td></tr>
<tr><td>Google Maps API</td><td>地図表示，ストリートビュー表示，etc...</td></tr>
</tbody></table>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="googlebooksapi"><a class="header" href="#googlebooksapi">GoogleBooksAPI</a></h1>
<h2 id="google-books-apiとは"><a class="header" href="#google-books-apiとは">Google Books APIとは</a></h2>
<p><a href="https://developers.google.com/books/docs/overview">ドキュメント</a></p>
<p>本APIに限らず，APIには必ずドキュメント（仕様書）が存在する．</p>
<p>ドキュメントには下記のような重要な情報が記載されているため，必ず目を通そう．</p>
<ul>
<li>APIにできること（得られるデータややってくれる処理など）．</li>
<li>APIの使い方やサンプルコード．</li>
<li>料金（無料のものと有料のものが存在する）．</li>
</ul>
<h2 id="特徴"><a class="header" href="#特徴">特徴</a></h2>
<ul>
<li>Google Booksに登録されている本のjsonデータを取得できる！</li>
<li>タイトルや著者などで条件を指定できる！</li>
<li>（仕様をよく読みましょう！）</li>
<li>API keyが不要！！！</li>
</ul>
<blockquote>
<p>API keyとは</p>
<ul>
<li>APIにリクエストを送るためにはユニークな文字列が必要．</li>
<li>設定を行ったアプリケーションのみ動作させるため．（無断で使用されないように．．！）</li>
<li>この文字列をAPIキーを呼び，APIの種類問わず必須の場合が多い．</li>
</ul>
</blockquote>
<h2 id="処理の流れ-1"><a class="header" href="#処理の流れ-1">処理の流れ</a></h2>
<ul>
<li>APIに定められたURLにリクエストを送信する．</li>
<li>送信の際には欲しいデータに必要な条件などを指定する．</li>
</ul>
<h2 id="http通信の準備"><a class="header" href="#http通信の準備">HTTP通信の準備</a></h2>
<p>APIへのリクエストには「HTTP通信」という方式で送信する．</p>
<p>JavaScriptでHTTP通信を行うには下記のような複数の方法が存在する．下のものほどオススメ．</p>
<table><thead><tr><th>方法</th><th>特徴</th></tr></thead><tbody>
<tr><td>XMLHttpRequest</td><td>生JS / 一番昔から存在する</td></tr>
<tr><td>$.ajax()</td><td>jQuery / これが出てきて流行った</td></tr>
<tr><td>fetch</td><td>生JS / 慣れないと分かりづらい</td></tr>
<tr><td>axios</td><td>ReactとかVueでも使われていて使い勝手が良い</td></tr>
</tbody></table>
<p>今回は<code>axios</code>ライブラリを使用する．ライブラリであるため，下記のコードで読み込みが必要となる．</p>
<p>最近のモダンなフレームワーク（React, Vue.jsなど）でも利用されているため，今の時点から慣れておくのも良き．</p>
<pre><code class="language-html">&lt;!-- booksapi.html --&gt;

&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;

</code></pre>
<h2 id="リクエストの送信とデータの受け取り"><a class="header" href="#リクエストの送信とデータの受け取り">リクエストの送信とデータの受け取り</a></h2>
<p>Google Books APIで指定された下記のURLにリクエストする．</p>
<p><code>https://www.googleapis.com/books/v1/volumes</code></p>
<p>リクエストの際には，得たいデータの条件などを指定する．</p>
<ul>
<li>今回は「本のタイトルに<code>javascript</code>が含まれる」という条件を指定してみる．</li>
<li>本条件を指定する場合は，上記URLの最後に「<code>?q=intitle:javascript</code>」を追加する．</li>
<li>条件の指定の仕方はドキュメントに記載されている．APIによって指定方法が異なるため，必ずドキュメントを確認しよう．</li>
</ul>
<p>リクエストは<code>axios.get()</code>関数で実行する．</p>
<pre><code class="language-js">// booksapi.html

const requestUrl = 'https://www.googleapis.com/books/v1/volumes?q=intitle:javascript';

axios.get(requestUrl)
  .then(function (response) {
    // リクエスト成功時の処理（responseに結果が入っている）
    console.log(response);
  }).catch(function (error) {
    // リクエスト失敗時の処理（errorにエラー内容が入っている）
    console.log(error);
  }).finally(function () {
    // 成功失敗に関わらず必ず実行
    console.log('done!');
  });

</code></pre>
<h3 id="リクエストを送信するaxiosgetの動き方"><a class="header" href="#リクエストを送信するaxiosgetの動き方">リクエストを送信する<code>axios.get()</code>の動き方</a></h3>
<p><code>axios.get()</code>関数の<code>.then()</code>などは実行されるタイミングが下記のように決まっている．</p>
<table><thead><tr><th>記述</th><th>実行されるタイミング</th></tr></thead><tbody>
<tr><td><code>.then(function (response) {...})</code></td><td>情報の取得に成功した場合に<code>{}</code>内が実行される．<br>取得した情報は<code>response</code>に格納されている．</td></tr>
<tr><td><code>.catch(function (error) {...}</code></td><td>情報の取得に失敗した場合に<code>{}</code>内が実行される．<br>エラーの詳細が<code>error</code>に格納されている．</td></tr>
<tr><td><code>.finally(function () {...}</code></td><td>情報の取得成否にかかわらず<code>{}</code>内が実行される．</td></tr>
</tbody></table>
<h3 id="処理の順番"><a class="header" href="#処理の順番">処理の順番</a></h3>
<p>したがって，リクエストの成否によって下記のどちらかの順番で処理が実行されることとなる．</p>
<ul>
<li>リクエスト成功の場合
<ol>
<li><code>.then(function (response) {...})</code>の<code>{}</code>内に記述した処理．</li>
<li><code>.finally(function () {...}</code>の<code>{}</code>内に記述した処理．</li>
</ol>
</li>
<li>リクエスト失敗の場合
<ol>
<li><code>.catch(function (error) {...})</code>の<code>{}</code>内に記述した処理．</li>
<li><code>.finally(function () {...}</code>の<code>{}</code>内に記述した処理．</li>
</ol>
</li>
</ul>
<h3 id="-key-point-14"><a class="header" href="#-key-point-14">💡 Key Point</a></h3>
<blockquote>
<p>重要なのはリクエストに成功した場合の処理である．</p>
<p>APIから取得したデータを使いたい場合は<code>.then(function (response) {...})</code>の<code>{}</code>内に処理を記述しよう．</p>
</blockquote>
<h2 id="実行結果"><a class="header" href="#実行結果">実行結果</a></h2>
<p>上記のコードを実行すると，コンソールには以下のようなデータが表示される．</p>
<p>データ全体はオブジェクトとなっており，<code>data.items</code>に本のデータが配列形式でまとまっている．ブラウザの検証画面をみてデータ構造や本のタイトルがどこに含まれているのかなど確認しよう．</p>
<pre><code class="language-js">// 検証画面に表示される内容

{data: {…}, status: 200, statusText: &quot;&quot;, headers: {…}, config: {…}, …}
  config: {url: &quot;https://www.googleapis.com/books/v1/volumes?q=intitle:javascript&quot;, method: &quot;get&quot;, headers: {…}, transformRequest: Array(1), transformResponse: Array(1), …}
  data:
    items: Array(10)
      0: {kind: &quot;books#volume&quot;, id: &quot;yg0fBAAAQBAJ&quot;, etag: &quot;lfbwNFyvkDg&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/yg0fBAAAQBAJ&quot;, volumeInfo: {…}, …}
      1: {kind: &quot;books#volume&quot;, id: &quot;sREfBAAAQBAJ&quot;, etag: &quot;Bbo+KCTb+os&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/sREfBAAAQBAJ&quot;, volumeInfo: {…}, …}
      2: {kind: &quot;books#volume&quot;, id: &quot;EgEfBAAAQBAJ&quot;, etag: &quot;1Sqd8Kh1nDE&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/EgEfBAAAQBAJ&quot;, volumeInfo: {…}, …}
      3: {kind: &quot;books#volume&quot;, id: &quot;oeFeDwAAQBAJ&quot;, etag: &quot;VpC+UDGt4ak&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/oeFeDwAAQBAJ&quot;, volumeInfo: {…}, …}
      4: {kind: &quot;books#volume&quot;, id: &quot;EQ0fBAAAQBAJ&quot;, etag: &quot;IUx31Y7bo5w&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/EQ0fBAAAQBAJ&quot;, volumeInfo: {…}, …}
      5: {kind: &quot;books#volume&quot;, id: &quot;sLiKBgAAQBAJ&quot;, etag: &quot;W8AX5pJDoTw&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/sLiKBgAAQBAJ&quot;, volumeInfo: {…}, …}
      6: {kind: &quot;books#volume&quot;, id: &quot;MMGlDwAAQBAJ&quot;, etag: &quot;uasA3kSjFmg&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/MMGlDwAAQBAJ&quot;, volumeInfo: {…}, …}
      7: {kind: &quot;books#volume&quot;, id: &quot;OH-ynAEACAAJ&quot;, etag: &quot;BGSumK/B93U&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/OH-ynAEACAAJ&quot;, volumeInfo: {…}, …}
      8: {kind: &quot;books#volume&quot;, id: &quot;0pfxN9xhwMIC&quot;, etag: &quot;0m0saY33NmY&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/0pfxN9xhwMIC&quot;, volumeInfo: {…}, …}
      9: {kind: &quot;books#volume&quot;, id: &quot;VI-EoAEACAAJ&quot;, etag: &quot;SvupF5US57Q&quot;, selfLink: &quot;https://www.googleapis.com/books/v1/volumes/VI-EoAEACAAJ&quot;, volumeInfo: {…}, …}
      length: 10
    kind: &quot;books#volumes&quot;
    totalItems: 200
  headers: {cache-control: &quot;private&quot;, content-encoding: &quot;gzip&quot;, content-length: &quot;7804&quot;, content-type: &quot;application/json; charset=UTF-8&quot;, date: &quot;Sun, 06 Jun 2021 07:45:18 GMT&quot;, …}
  request: XMLHttpRequest {readyState: 4, timeout: 0, withCredentials: false, upload: XMLHttpRequestUpload, onreadystatechange: ƒ, …}
  status: 200
  statusText: &quot;&quot;

</code></pre>
<h2 id="練習-10"><a class="header" href="#練習-10">練習</a></h2>
<p>Google Books APIを使って下記を実行しよう！</p>
<ol>
<li>検索の条件を自由に設定してURLを作成しよう！</li>
<li>本の情報をconsole.log()で出力しよう！</li>
<li>本のタイトルをブラウザ上に一覧表示してみよう！</li>
<li>（タイトルにリンクを張る，本の画像を表示，などもチャレンジ）</li>
</ol>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="位置情報の活用"><a class="header" href="#位置情報の活用">位置情報の活用</a></h1>
<h2 id="位置情報とその使われ方"><a class="header" href="#位置情報とその使われ方">位置情報とその使われ方</a></h2>
<p>近年位置情報の活用幅や重要性は増しており，サービスの8割程度で利用されているとも言われている．</p>
<p><a href="https://japan.cnet.com/article/20417587/">参考1</a></p>
<p><a href="https://forbesjapan.com/articles/detail/38376">参考2</a></p>
<h3 id="gpsなどを用いた位置情報"><a class="header" href="#gpsなどを用いた位置情報">GPSなどを用いた位置情報</a></h3>
<ul>
<li>位置情報とマップの組み合わせ</li>
<li>今まではユーザの現在地がわからなかった．</li>
<li>ユーザの現在位置を視覚的に表示できるため，どこに行けばよいかがわかる．</li>
<li>地図上に店舗データなどを表示できる．</li>
<li>道を間違っても自動的に現在地からのルートが分かる</li>
</ul>
<h3 id="wifiを用いた位置情報"><a class="header" href="#wifiを用いた位置情報">Wifiを用いた位置情報</a></h3>
<ul>
<li>店舗のマーケティングリサーチ</li>
<li>電波強度で顧客を分類する．
<ul>
<li>強ければ店内，弱ければ店外．</li>
</ul>
</li>
<li>接続時間で顧客を分類する．
<ul>
<li>時間が長ければ店内，短ければ店外．</li>
<li>営業時間内なら顧客，時間外は通行人．</li>
</ul>
</li>
</ul>
<h3 id="ビーコンを用いた位置情報"><a class="header" href="#ビーコンを用いた位置情報">ビーコンを用いた位置情報</a></h3>
<ul>
<li>店内の販促ツール．
<ul>
<li>棚の近くにビーコンを設置．</li>
<li>ユーザが近づくとLINEにクーポンを配信．</li>
</ul>
</li>
<li>ユーザにアプリ等のツールが必要ない．</li>
<li>購入レシートを送信するとポイントが当たる．</li>
<li>再度の来店を促す．</li>
</ul>
<h2 id="javscriptでの位置情報取得"><a class="header" href="#javscriptでの位置情報取得">JavScriptでの位置情報取得</a></h2>
<p>JavaScriptには標準で位置情報を取得する関数が組み込まれている．</p>
<h3 id="種類"><a class="header" href="#種類">種類</a></h3>
<p>下記2種類の方法で位置情報を取得することができる．</p>
<table><thead><tr><th>方法</th><th>概要</th></tr></thead><tbody>
<tr><td>getCurrentPosition</td><td>処理を実行したタイミングで一度だけ位置情報を取得する．</td></tr>
<tr><td>watchPosition</td><td>処理を実行すると，位置情報を常に取得し続ける．<br>バッテリー消費に注意！</td></tr>
</tbody></table>
<h3 id="オプション"><a class="header" href="#オプション">オプション</a></h3>
<p>また，上記の処理を実行する際には3種類のオプションを設定することができる．</p>
<p>オプションはオブジェクト形式で設定し，上記処理を実行する際に読み込むことで適用される．</p>
<table><thead><tr><th>オプション名</th><th>内容や設定のしかた</th></tr></thead><tbody>
<tr><td>enableHighAccuracy</td><td>対応端末でGPSを使用するかどうかの設定．<br><code>true</code>または<code>false</code>で指定．</td></tr>
<tr><td>maximumAge</td><td>指定時間以内であれば前回取得した位置情報の値を用いる．<br>ミリ秒で指定．</td></tr>
<tr><td>timeout</td><td>タイムアウト時間を設定する．<br>ミリ秒で指定．</td></tr>
</tbody></table>
<h2 id="処理の流れとコード"><a class="header" href="#処理の流れとコード">処理の流れとコード</a></h2>
<p>位置情報を取得する処理を記述する場合には，下記の3項目が必要となるため，予め用意しておく必要がある．</p>
<ol>
<li>位置情報の取得に成功した場合に実行される関数（サンプルでは<code>showPosition</code>）．</li>
<li>位置情報の取得に失敗した場合に実行される関数（サンプルでは<code>showError</code>）．</li>
<li>位置情報の取得に必要なオプション（前項で紹介したもの，サンプルでは<code>option</code>）．</li>
</ol>
<p>⚠️ 上記3項目は下記コード（位置情報取得の処理）よりも上に書いておく必要がある．</p>
<h3 id="位置情報取得の処理"><a class="header" href="#位置情報取得の処理">位置情報取得の処理</a></h3>
<pre><code class="language-js">// geolocation.html

navigator.geolocation.getCurrentPosition(showPosition, showError, option);

</code></pre>
<h3 id="位置情報の取得に成功した場合に実行される関数"><a class="header" href="#位置情報の取得に成功した場合に実行される関数">位置情報の取得に成功した場合に実行される関数</a></h3>
<p>位置情報の取得に成功すると，自動的に関数の引数（下記では<code>position</code>）に位置情報が入ってくる．</p>
<p>まずはconsoleに出力して内容を確認しよう．</p>
<pre><code class="language-js">// geolocation.html

function showPosition (position) {
  console.log(position);
  const lat = position.coords.latitude;
  const lng = position.coords.longitude;
  console.log(lat, lng);
};

</code></pre>
<h3 id="位置情報の取得に失敗した場合に実行される関数"><a class="header" href="#位置情報の取得に失敗した場合に実行される関数">位置情報の取得に失敗した場合に実行される関数</a></h3>
<p>位置情報の取得に失敗した場合は決まったエラーが返される．</p>
<p>エラーには番号（<code>1</code>, <code>2</code>, <code>3</code>）が振ってあり意味が決まっているため，それぞれに対応したメッセージを表示するように記述してある．</p>
<pre><code class="language-js">// geolocation.html

function showError (error) {
  const errorMessages = [
    '位置情報が許可されてません',
    '現在位置を特定できません',
    '位置情報を取得する前にタイムアウトになりました',
  ];
  alert(`error:${errorMessages[error.code - 1]}`);
}

</code></pre>
<h3 id="位置情報の取得に必要なオプション"><a class="header" href="#位置情報の取得に必要なオプション">位置情報の取得に必要なオプション</a></h3>
<p>オブジェクトの形式で3項目を指定する．</p>
<pre><code class="language-js">// geolocation.html

const option = {
  enableHighAccuracy: true,
  maximumAge: 20000,
  timeout: 1000000,
};

</code></pre>
<h2 id="動作確認-4"><a class="header" href="#動作確認-4">動作確認</a></h2>
<p>コードが実行されると「位置情報の取得を許可するかどうか」のダイアログが表示されるため，許可する．</p>
<p>位置情報が取得できると，コンソール画面には以下のような情報が表示される．</p>
<p>位置情報は緯度経度で表現され，それぞれ<code>latitude</code>と<code>longitude</code>の値が対応する．</p>
<pre><code class="language-js">GeolocationPosition {coords: GeolocationCoordinates, timestamp: 1622956582259}
  coords: GeolocationCoordinates
    accuracy: 200
    altitude: null
    altitudeAccuracy: null
    heading: null
    latitude: 35.69
    longitude: 139.69
    speed: null
timestamp: 1622956582259
</code></pre>
<h2 id="練習-11"><a class="header" href="#練習-11">練習</a></h2>
<p>下記の処理を実装しよう！</p>
<ol>
<li>読み込み時に位置情報を取得してconsole.log()に表示しよう！</li>
<li>できる人は取得した緯度と経度をブラウザに表示しよう！</li>
</ol>
<p>（位置情報の取得までに時間がかかることもあるので気長に待つ！）</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="bingmapsapi準備"><a class="header" href="#bingmapsapi準備">BingMapsAPI/準備</a></h1>
<h2 id="bing-maps-apiとは"><a class="header" href="#bing-maps-apiとは">Bing Maps APIとは</a></h2>
<p>Microsoftが提供する地図APIである．位置情報との連携を中心に様々な機能を提供する．</p>
<p>今回は前項で取得した位置情報を利用し，現在地付近の地図をブラウザ上に表示するアプリケーションを実装する．</p>
<h3 id="特徴-1"><a class="header" href="#特徴-1">特徴</a></h3>
<ul>
<li>JavaScriptのみで実装可能．</li>
<li>機能を実現するために必要なコードはMicrosoftが定めている．決められたコードを記述するだけで様々な機能を実装可能．</li>
<li>支払い情報など登録する必要なく無料で使用可能．</li>
</ul>
<h3 id="機能例"><a class="header" href="#機能例">機能例</a></h3>
<ul>
<li>任意の地点・縮尺で地図の表示．</li>
<li>出発地，到着地を指定したルート検索．</li>
<li>地図上の任意の地点にピン，Infobox（吹き出し），などを設置．</li>
<li>住所から緯度経度を取得．</li>
<li>緯度経度から住所を取得．</li>
</ul>
<h2 id="準備"><a class="header" href="#準備">準備</a></h2>
<p>Bing Maps APIを使用するためにはいくつかの準備が必要となる．主な手順は以下のとおり．</p>
<ol>
<li>Microsoftアカウントが必要（事前準備済）．</li>
<li>Bing Maps API開発者アカウントの準備．</li>
<li>API keyの発行．</li>
<li>（実際にコードを記述する）</li>
</ol>
<h3 id="開発者アカウントの準備"><a class="header" href="#開発者アカウントの準備">開発者アカウントの準備</a></h3>
<p>まずは下記のURLにアクセス！</p>
<p><a href="https://www.bingmapsportal.com">https://www.bingmapsportal.com</a></p>
<p>下記の画面から「Sign In」ボタンをクリック．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_setup01.svg" alt="bingmapsAPI準備1" /></p>
<p>Microsoftアカウントでログインする．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_setup02.svg" alt="bingmapsAPI準備2" /></p>
<p>画面が切り替わるので「Yes, let's create a new account」をクリックし，アカウント情報を入力する．</p>
<p>メールアドレスはMicrosoftアカウントと同じものを使用すると管理しやすいだろう．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_setup03.svg" alt="bingmapsAPI準備3" /></p>
<h3 id="api-keyの発行"><a class="header" href="#api-keyの発行">API keyの発行</a></h3>
<p>アカウントが作成できたら，画面上部のタブの「My account」 -&gt; 「My Keys」をクリックする．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_setup04.svg" alt="bingmapsAPI準備4" /></p>
<p>アプリケーション名を入力し，API keyを作成する．アプリケーション名以外は初期状態のままで構わない．</p>
<p>アプリケーション名は「何のアプリケーションなのか」がわかる名前にしよう．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_setup05.svg" alt="bingmapsAPI準備5" /></p>
<p>作成が正常に完了すると自動的に画面が切り替わる．下図の「Show key」部分をクリックするとAPI keyが表示される．</p>
<p>API keyは後ほどコード内に記述する必要があるため，この画面は開いたままにしておくとスムーズである．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_setup06.svg" alt="bingmapsAPI準備6" /></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="bingmapsapi実践"><a class="header" href="#bingmapsapi実践">BingMapsAPI/実践</a></h1>
<p>API keyの準備が完了したら，実際にJavaScriptを書いてMapを表示してみよう．</p>
<h2 id="処理の流れ-2"><a class="header" href="#処理の流れ-2">処理の流れ</a></h2>
<p>位置情報の取得とAPI処理を組み合わせるため，実行される順番がやや複雑になる．コメントなどで順番がわかるようにしておくと自力で実装する際の助けとなるだろう．</p>
<ol>
<li>APIを使用するためのコード読み込み．</li>
<li>位置情報取得に成功した場合の関数，失敗した場合の関数，オプションを記述．</li>
<li>位置情報の取得（前項での処理と同様）</li>
<li>位置情報が取得できた場合は，id指定したHTML要素に現在地を中心としたマップを表示する（位置情報の取得に成功した場合に実行される関数内に記述する）．</li>
</ol>
<h2 id="コードの読み込み"><a class="header" href="#コードの読み込み">コードの読み込み</a></h2>
<p>Microsoftが提供するコードを読み込む．ここに自分のAPI keyを入力しておく．</p>
<pre><code class="language-html">&lt;!-- geo_and_map.html --&gt;

&lt;script src='https://www.bing.com/api/maps/mapcontrol?mkt=ja-jp&amp;key=API_KEY'&gt;&lt;/script&gt;

&lt;script&gt;
  // JSの処理
&lt;/script&gt;

</code></pre>
<h2 id="位置情報取得に成功した場合の関数失敗した場合の関数オプションを記述"><a class="header" href="#位置情報取得に成功した場合の関数失敗した場合の関数オプションを記述">位置情報取得に成功した場合の関数，失敗した場合の関数，オプションを記述．</a></h2>
<p>この3項目自体は前項の位置情報取得で使用したものと同様の記述をすればOK．</p>
<p>今回はそれぞれ以下のような内容．</p>
<ul>
<li>位置情報の取得に成功した場合に実行される関数（本項では<code>mapsInit</code>）．</li>
<li>位置情報の取得に失敗した場合に実行される関数（前項と全く同じ）．</li>
<li>位置情報の取得に必要なオプション（前項と全く同じ）．</li>
</ul>
<p>その他，マップの情報を格納するための変数（<code>map</code>）を定義しておく（これがないと動かないので注意！）．</p>
<h3 id="必要な関数を準備"><a class="header" href="#必要な関数を準備">必要な関数を準備</a></h3>
<pre><code class="language-js">// geo_and_map.html

// マップ情報格納用の変数
let map;

// 省略
const option = {...};

// 省略
function showError(error) {...};

// この後マップ表示の処理を書き込む
function mapsInit() {...};

</code></pre>
<h2 id="マップ表示処理の追加"><a class="header" href="#マップ表示処理の追加">マップ表示処理の追加</a></h2>
<p>マップの表示処理はMicrosoft側で決められているため，ドキュメントに従ってコードを記述すればOK．</p>
<p>流れとしては下記のとおり．</p>
<ol>
<li>位置情報から緯度経度を抽出する．</li>
<li>1で取得した緯度経度を中心にしてマップを表示する．</li>
</ol>
<p>マップを表示する際には下記の情報が必要となる．</p>
<ul>
<li>マップを表示したい要素のid名（<code>#map</code>）．</li>
<li>表示するマップの中心座標（緯度経度，<code>center</code>のオブジェクト）．</li>
<li>表示するマップの縮尺（<code>1</code>から<code>20</code>で指定）．</li>
</ul>
<pre><code class="language-js">// geo_and_map.html

function mapsInit(position) {
  const lat = position.coords.latitude;
  const lng = position.coords.longitude;
  map = new Microsoft.Maps.Map('#map', {
    center: {
      latitude: lat, longitude: lng
    },
    zoom: 15,
  });
};

</code></pre>
<h2 id="位置情報取得処理"><a class="header" href="#位置情報取得処理">位置情報取得処理</a></h2>
<p>最後に，実際に位置情報を取得する処理を記述する．</p>
<p>コード自体は前項と同様だが，実行のタイミングに注意する必要がある．理由は以下．</p>
<ul>
<li>マップ表示のためにはMicrosoftが提供したコードを読み込む必要がある．</li>
<li>読み込みが完了する前にマップ表示の処理を実行しようとするとエラーになる．</li>
<li>そのため，読み込みが完了した後に「位置情報取得 -&gt; マップ表示」の処理が実行されるように記述しなければならない．</li>
</ul>
<p>この場合，<code>window.onload = function () {...}</code>を用いることで，全てのスクリプトが読み込ま出てから<code>{}</code>内が実行されるように記述できる．</p>
<pre><code class="language-js">// geo_and_map.html

window.onload = function () {
  navigator.geolocation.getCurrentPosition(mapsInit, showError, option);
};

</code></pre>
<h3 id="-key-point-15"><a class="header" href="#-key-point-15">💡 Key Point</a></h3>
<blockquote>
<p>API（特に外部のコードを読み込む場合）は読み込み -&gt; 実行の順番が重要になる場合が多い．</p>
</blockquote>
<h2 id="実行結果-1"><a class="header" href="#実行結果-1">実行結果</a></h2>
<p>正常に位置情報が取得でき，マップ表示処理が実行されると，以下のようにブラウザ上にマップが表示される．</p>
<p>実行場所やネットワーク環境によって場所は変化するため，実際の場所とあっていなくても気にしなくてOK．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_result01.png" alt="マップ表示結果" /></p>
<h2 id="練習-12"><a class="header" href="#練習-12">練習</a></h2>
<p>下記の処理を実装しよう！</p>
<ul>
<li>位置情報の取得に成功したときに関数を定義し，map表示の処理を記述．</li>
<li>位置情報を取得する処理を記述し，画面にマップが表示されることを確認！</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="おまけbingmapsapi機能追加"><a class="header" href="#おまけbingmapsapi機能追加">【おまけ】BingMapsAPI/機能追加</a></h1>
<p>マップが表示されたら，マップ上にピンなどのオブジェクトを配置してみよう．</p>
<h2 id="ピンの生成"><a class="header" href="#ピンの生成">ピンの生成</a></h2>
<p>現在地をわかりやすくするピンを設定できる．</p>
<h3 id="処理の流れ-3"><a class="header" href="#処理の流れ-3">処理の流れ</a></h3>
<ol>
<li>「ピンを立てる関数」を定義する．
<ul>
<li>ピンの色などのオプションを指定する．</li>
<li>表示したいマップを指定する．</li>
</ul>
</li>
<li>前項で実装したマップ表示後に「ピンを立てる関数」を実行する．</li>
</ol>
<h3 id="ピンを立てる関数の定義"><a class="header" href="#ピンを立てる関数の定義">ピンを立てる関数の定義</a></h3>
<p>マップ表示と同様にMicrosoftが処理を用意しているため，ドキュメントに従って記述すればOK．</p>
<p>本関数の中身は以下の流れ．</p>
<ul>
<li>「ピンを表示したい位置の緯度」「経度」「表示したいマップ」の3つを入力する．</li>
<li>入力された緯度経度をMicrosoftのフォーマットに変換する．</li>
<li>ピンの位置と色・表示設定を指定する．</li>
<li>入力されたマップ上にピンを配置する．</li>
</ul>
<pre><code class="language-js">// geo_and_map.html

function pushPin(lat, lng, map) {
  const location = new Microsoft.Maps.Location(lat, lng)
  const pin = new Microsoft.Maps.Pushpin(location, {
    color: 'navy',
    visible: true,
  });
  map.entities.push(pin);
};

</code></pre>
<h3 id="ピンを立てる関数の実行"><a class="header" href="#ピンを立てる関数の実行">ピンを立てる関数の実行</a></h3>
<p>マップ表示後に関数を実行する．</p>
<pre><code class="language-js">// geo_and_map.html

function mapsInit(position) {
  const lat = position.coords.latitude;
  const lng = position.coords.longitude;
  map = new Microsoft.Maps.Map('#map', {
    center: {
      latitude: lat, longitude: lng
    },
    zoom: 15,
  });
  pushPin(lat, lng, map);
};

</code></pre>
<h2 id="infoboxの生成"><a class="header" href="#infoboxの生成">infoboxの生成</a></h2>
<p>infobox（吹き出し）を生成する関数を定義する．吹き出し内には任意のテキストや画像を表示することができる．</p>
<h3 id="処理の流れ-4"><a class="header" href="#処理の流れ-4">処理の流れ</a></h3>
<ol>
<li>「Infoboxを立てる関数」を定義する．
<ul>
<li>Infoboxの表示内容などのオプションを指定する．</li>
<li>表示したいマップを指定する．</li>
</ul>
</li>
<li>前項で実装したマップ表示後に「Infoboxを立てる関数」を実行する．</li>
</ol>
<h3 id="infoboxを生成する関数の定義"><a class="header" href="#infoboxを生成する関数の定義">Infoboxを生成する関数の定義</a></h3>
<p>これまでと同様にMicrosoftが処理を用意しているため，ドキュメントに従って記述すればOK．</p>
<p>本関数の中身は以下の流れ．</p>
<ul>
<li>「Infoboxを表示したい位置の緯度」「経度」「表示したいマップ」の3つを入力する．</li>
<li>入力された緯度経度をMicrosoftのフォーマットに変換する．</li>
<li>Infoboxの位置と表示内容を指定する．</li>
<li>入力されたマップ上にInfoboxを配置する．</li>
</ul>
<pre><code class="language-js">// geo_and_map.html

function generateInfobox(lat, lng, map) {
  const location = new Microsoft.Maps.Location(lat, lng)
  const infobox = new Microsoft.Maps.Infobox(location, {
    title: `G's ACADEMY`,
    description: &quot;JavaScript!!!&quot;
  });
  infobox.setMap(map);
};

</code></pre>
<h3 id="infoboxを生成する関数の実行"><a class="header" href="#infoboxを生成する関数の実行">Infoboxを生成する関数の実行</a></h3>
<p>マップ表示後に関数を実行する．</p>
<pre><code class="language-js">// geo_and_map.html

function mapsInit(position) {
  const lat = position.coords.latitude;
  const lng = position.coords.longitude;
  map = new Microsoft.Maps.Map('#map', {
    center: {
      latitude: lat, longitude: lng
    },
    zoom: 15,
  });
  pushPin(lat, lng, map);
  generateInfobox(lat, lng, map);
};

</code></pre>
<h2 id="実行結果-2"><a class="header" href="#実行結果-2">実行結果</a></h2>
<p>マップ上にピンとInfoboxが表示される．</p>
<p><img src="js/js05/./img/js_api_bingmapsapi_result02.png" alt="ピン表示結果" /></p>
<h2 id="その他の機能"><a class="header" href="#その他の機能">その他の機能</a></h2>
<p>ここまで紹介した機能はほんの一部！！</p>
<h3 id="ドキュメントも読んでみよう"><a class="header" href="#ドキュメントも読んでみよう">ドキュメントも読んでみよう！</a></h3>
<p><a href="https://bingmapsv8samples.azurewebsites.net">https://bingmapsv8samples.azurewebsites.net</a></p>
<h3 id="山崎先生が作ったサンプル集かなり参考になる"><a class="header" href="#山崎先生が作ったサンプル集かなり参考になる">山崎先生が作ったサンプル集！！（かなり参考になる！！）</a></h3>
<p><a href="https://mapapi.org">https://mapapi.org</a></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="その他のapi紹介"><a class="header" href="#その他のapi紹介">その他のAPI紹介</a></h1>
<p>今回扱った内容以外にも様々なAPIが存在する．</p>
<p>APIを扱う場合は下記がポイントとなる．</p>
<ul>
<li>自分が実現しようとしていることに対して活用できそうなAPIはないか．</li>
<li>複数のAPIを連携させることで，新しい価値を生み出せないか．</li>
</ul>
<p>まずはどんなAPIが存在するのか，探すことから始めよう！</p>
<h2 id="例-4"><a class="header" href="#例-4">例</a></h2>
<table><thead><tr><th>機能</th><th>概要</th><th>API例</th></tr></thead><tbody>
<tr><td>画像認識</td><td>画像に含まれる物体の名前，表示位置などの推定値を返す</td><td>Google Cloud Vision APIなど．</td></tr>
<tr><td>翻訳</td><td>翻訳したいテキストと翻訳先の言語名を送信すると翻訳されたテキストを返す．</td><td>Microsoft Translator Text APIなど．</td></tr>
<tr><td>テキスト解析</td><td>テキストの感情などを分析してスコアを返す．</td><td>Natural Language APIなど．</td></tr>
<tr><td>ECサイトの情報</td><td>キーワードやカテゴリなどの条件で扱っている商品のリストを返す．</td><td>楽天商品検索APIなど．</td></tr>
<tr><td>天気情報</td><td>任意の地点（都市名や緯度経度）から気象情報や天気予報を返す．</td><td>Open Weather Map APIなど．</td></tr>
</tbody></table>
<h2 id="まずは探せ"><a class="header" href="#まずは探せ">まずは探せ！！</a></h2>
<p><a href="https://www.apibank.jp">https://www.apibank.jp</a></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="課題-2"><a class="header" href="#課題-2">課題</a></h1>
<p><strong>「API」を使用したアプリケーションを実装！！</strong></p>
<h2 id="考え方"><a class="header" href="#考え方">考え方</a></h2>
<ul>
<li>APIを組み合わせる！</li>
<li>FirebaseやLocalStorageを組み込んでもOK！</li>
<li>API自体を作ってもいいぞ．．！</li>
</ul>
<h2 id="アレンジの例"><a class="header" href="#アレンジの例">アレンジの例</a></h2>
<ul>
<li>ゾンビと対戦するマップ</li>
<li>ワンタップで周辺のレストランを検索</li>
<li>その日の天気や気温で近くの飲食店をレコメンド</li>
<li>政府の統計情報からマーケット分析</li>
<li>twitter bot, LINE bot, etc...</li>
</ul>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="php"><a class="header" href="#php">PHP</a></h1>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="php事前準備"><a class="header" href="#php事前準備">PHP事前準備</a></h1>
<h2 id="サーバとクライアント"><a class="header" href="#サーバとクライアント">サーバとクライアント</a></h2>
<p>サーバで動作する言語（サーバサイド）</p>
<ul>
<li>webサーバ上でプログラムが実行される．</li>
<li>PHP, Ruby, Python, JAVA, (node.js), etc…</li>
</ul>
<p>クライアント（webブラウザ）で動作する言語（クライアントサイド）</p>
<ul>
<li>webブラウザでプログラムが実行される．</li>
<li>html, css, JavaScript</li>
</ul>
<p>=&gt;サーバサイド言語の開発にはサーバ上で動作させるアプリケーション（xamppなど）が必要！</p>
<p>（自分のPC上でサーバを動かすイメージ）</p>
<h2 id="サーバのしくみと-xampp-の役割"><a class="header" href="#サーバのしくみと-xampp-の役割">サーバのしくみと XAMPP の役割</a></h2>
<h3 id="サーバの役割及び構成"><a class="header" href="#サーバの役割及び構成">サーバの役割及び構成</a></h3>
<p>Webアプリケーションはクライアントとサーバの組み合わせで構成されている．</p>
<p>サーバには「アプリケーションサーバ」と「DBサーバ」が存在し，相互に連携することでアプリケーションを構築している．</p>
<p>（詳しい仕組みの理解は後からでOK．）</p>
<p><img src="php/php_setup/./img/php_file_about_server.svg" alt="サーバのしくみ" /></p>
<h3 id="サーバサイド言語での開発とxamppの役割"><a class="header" href="#サーバサイド言語での開発とxamppの役割">サーバサイド言語での開発とXAMPPの役割</a></h3>
<p>上記のとおり，PHP（及び他のサーバサイド言語）を動作させるには「サーバ」が必要となる．</p>
<p>しかし，自身のPCで開発を行う場合に都度サーバを用意することは効率的ではない．</p>
<p>このような場合に自身のPC内で擬似的なサーバを用意してPHPを動作させることができるのが「xampp」である．</p>
<p>xamppは以下の役割を提供する．</p>
<ul>
<li>PHPを動作させるアプリケーションサーバ（<code>Apatch web server</code>）を用意する．</li>
<li>データを保存するためのデータベース（<code>MySQL Database</code>）を用意する．</li>
<li>その他いろいろ（今回の開発では使用しない）．</li>
</ul>
<p><img src="php/php_setup/./img/php_file_about_xampp.svg" alt="xampp概要" /></p>
<h2 id="xampp環境構築"><a class="header" href="#xampp環境構築">XAMPP環境構築</a></h2>
<h3 id="ダウンロード"><a class="header" href="#ダウンロード">ダウンロード</a></h3>
<p>下記URLにアクセスする．</p>
<p><a href="https://www.apachefriends.org/jp/download.html">https://www.apachefriends.org/jp/download.html</a></p>
<blockquote>
<p><strong>！！注意！！</strong></p>
<p>資料作成時時点では<code>7.3.6 / PHP 7.3.6</code>となっているが，現時点（2021/09/06）では<code>8.0.9 / PHP 8.0.9</code>が最新なのでこちらを用いること！！</p>
</blockquote>
<p>↓アクセス画面
<img src="php/php_setup/./img/php_setup_xampp_download_01.svg" alt="xamppダウンロード画面" /></p>
<p>Macの人は下記からダウンロード．</p>
<p><img src="php/php_setup/./img/php_setup_xampp_download_02.svg" alt="xamppダウンロード画面" /></p>
<p>Windowsの人は下記からダウンロード．</p>
<p><img src="php/php_setup/./img/php_setup_xampp_download_03.svg" alt="xamppダウンロード画面" /></p>
<h3 id="インストール"><a class="header" href="#インストール">インストール</a></h3>
<p>ダウンロードしたらインストールを進める．</p>
<p><img src="php/php_setup/./img/php_setup_xampp_download_04.svg" alt="xamppダウンロード画面" /></p>
<h3 id="動作確認サーバ起動"><a class="header" href="#動作確認サーバ起動">動作確認（サーバ起動）</a></h3>
<p>インストールが済んだらアプリケーションを立ち上げる．</p>
<p>Macの人は以下のようにサーバを起動させる．</p>
<p><img src="php/php_setup/./img/php_setup_xampp_download_05.svg" alt="xamppダウンロード画面" /></p>
<p>Windowsの人は以下の画面．</p>
<p><img src="php/php_setup/./img/php_setup_xampp_download_06.svg" alt="xamppダウンロード画面" /></p>
<h3 id="動作確認画面表示"><a class="header" href="#動作確認画面表示">動作確認（画面表示）</a></h3>
<h4 id="アプリケーションサーバ動作確認"><a class="header" href="#アプリケーションサーバ動作確認">アプリケーションサーバ動作確認</a></h4>
<p>ブラウザで<a href="https://localhost/">https://localhost/</a>にアクセスして下記画面が表示されればOK．</p>
<p><img src="php/php_setup/./img/php_setup_xampp_confirm_01.svg" alt="アプリケーションサーバ動作確認" /></p>
<h4 id="dbサーバ動作確認"><a class="header" href="#dbサーバ動作確認">DBサーバ動作確認</a></h4>
<p>ブラウザで<a href="https://localhost/phpmyadmin">https://localhost/phpmyadmin</a>にアクセスして下記画面が表示されればOK．</p>
<p><img src="php/php_setup/./img/php_setup_xampp_confirm_02.svg" alt="DBサーバ動作確認" /></p>
<h2 id="まとめ"><a class="header" href="#まとめ">まとめ</a></h2>
<p>下記3点が実施できていることを確認しよう！</p>
<ul>
<li>XAMPPの起動確認</li>
<li><a href="http://localhost/">http://localhost/</a>のアクセス確認</li>
<li><a href="http://localhost/phpmyadmin">http://localhost/phpmyadmin</a>のアクセス確認</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
